<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/11-AST%E8%8A%82%E7%82%B9%E6%A0%91%E4%B8%93%E9%A2%98.html"><meta property="og:site_name" content="学习笔记"><meta property="og:title" content="11-AST节点树专题"><meta property="og:description" content="AST 技术专题 学习目标: 了解 ast 执行过程 了解 ast 语法转换方式 熟悉 如何转换代码 熟练 使用 babel 执行命令 前言: **V8 引擎介绍(js 的解释器): ** 当前百花齐放的编程语言，主要分为编译型语言和解释型语言。 编译型语言的特点是在代码运行前编译器直接将对应的代码转换成机器码，运行时不需要再重新翻 译，直接可以使用编..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="YL"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"11-AST节点树专题","image":[""],"dateModified":null,"author":[{"@type":"Person","name":"YL","url":"https://mister-hope.com"}]}</script><title>11-AST节点树专题 | 学习笔记</title><meta name="description" content="AST 技术专题 学习目标: 了解 ast 执行过程 了解 ast 语法转换方式 熟悉 如何转换代码 熟练 使用 babel 执行命令 前言: **V8 引擎介绍(js 的解释器): ** 当前百花齐放的编程语言，主要分为编译型语言和解释型语言。 编译型语言的特点是在代码运行前编译器直接将对应的代码转换成机器码，运行时不需要再重新翻 译，直接可以使用编...">
    <link rel="preload" href="/assets/style-DYsSz7-m.css" as="style"><link rel="stylesheet" href="/assets/style-DYsSz7-m.css">
    <link rel="modulepreload" href="/assets/app-CFFpmDzR.js"><link rel="modulepreload" href="/assets/11-AST节点树专题.html-D-s5rc5m.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/1.mysql.html-Buddsr3-.js" as="script"><link rel="prefetch" href="/assets/2.mongodb.html-DEZx2vC8.js" as="script"><link rel="prefetch" href="/assets/1.Python3基础.html-DPIzc19_.js" as="script"><link rel="prefetch" href="/assets/10.网页解析模块二.html-C0C-P1nJ.js" as="script"><link rel="prefetch" href="/assets/11.request 网络请求.html-9njdTkTS.js" as="script"><link rel="prefetch" href="/assets/12.selenium.html-DTOwyDIX.js" as="script"><link rel="prefetch" href="/assets/13.数据库操作.html-DlZ9Dfmb.js" as="script"><link rel="prefetch" href="/assets/14.scrapy 框架.html-BpIqcgXr.js" as="script"><link rel="prefetch" href="/assets/15.逆向加密模块.html-BnRHMlwd.js" as="script"><link rel="prefetch" href="/assets/16.Django 框架.html-DnIHpW88.js" as="script"><link rel="prefetch" href="/assets/17.Python 其他.html-eZEuQwPk.js" as="script"><link rel="prefetch" href="/assets/18.openCV 基础.html-BOK9sJgk.js" as="script"><link rel="prefetch" href="/assets/2.常用库(共 15 个).html-CnvhFv-P.js" as="script"><link rel="prefetch" href="/assets/3.常用API速查.html-9pYashM-.js" as="script"><link rel="prefetch" href="/assets/4.Python进阶知识.html-B53BfPjq.js" as="script"><link rel="prefetch" href="/assets/5.面向对象编程.html-CNuRFLOb.js" as="script"><link rel="prefetch" href="/assets/6.网络编程.html-DvuHp6VK.js" as="script"><link rel="prefetch" href="/assets/7.并发编程.html-CUHMLCvp.js" as="script"><link rel="prefetch" href="/assets/8.爬虫所需 Python 基础.html-DgjdyBmU.js" as="script"><link rel="prefetch" href="/assets/9.HTML_CSS 基础.html-DQPnRd6D.js" as="script"><link rel="prefetch" href="/assets/1.初识爬虫.html-v7OVBRQF.js" as="script"><link rel="prefetch" href="/assets/10.Scrapy框架 - 分布式爬虫以及爬虫部署.html-C24X_WEI.js" as="script"><link rel="prefetch" href="/assets/11.Feapder框架.html-DiyRASal.js" as="script"><link rel="prefetch" href="/assets/2.Requests模块.html-CXJTHA1d.js" as="script"><link rel="prefetch" href="/assets/3.数据提取.html-B2le0KpY.js" as="script"><link rel="prefetch" href="/assets/4.正则表达式的详细教程.html-BnWZzpWN.js" as="script"><link rel="prefetch" href="/assets/5.数据存储.html-CFWuXv7K.js" as="script"><link rel="prefetch" href="/assets/6.并发爬虫.html-B1920zfM.js" as="script"><link rel="prefetch" href="/assets/7.自动化测试框架.html-BRmznzzN.js" as="script"><link rel="prefetch" href="/assets/8.IP代理池的搭建.html-Imn8p1OQ.js" as="script"><link rel="prefetch" href="/assets/9.Scrapy框架 - 基础操作.html-DJ4ZJKek.js" as="script"><link rel="prefetch" href="/assets/01-JS基础.html-DcO7MB1p.js" as="script"><link rel="prefetch" href="/assets/02-浏览器调试.html-dEPvcdxu.js" as="script"><link rel="prefetch" href="/assets/03-hook调试.html-DrrpgqA0.js" as="script"><link rel="prefetch" href="/assets/04-JS调用和扣代码.html-Bj2DBZ4g.js" as="script"><link rel="prefetch" href="/assets/05-哈希算法.html-BxiryKUH.js" as="script"><link rel="prefetch" href="/assets/06-对称加密.html-BzQHXRbt.js" as="script"><link rel="prefetch" href="/assets/07-非对称加密.html-OHfqGA9z.js" as="script"><link rel="prefetch" href="/assets/08-webpack专题.html-DbTRnxHC.js" as="script"><link rel="prefetch" href="/assets/09-sm国密系列.html-DtehAVnm.js" as="script"><link rel="prefetch" href="/assets/10-ob混淆专题.html-B4b-yXaD.js" as="script"><link rel="prefetch" href="/assets/12-RPC技术.html-BWr4G4i1.js" as="script"><link rel="prefetch" href="/assets/13-补环境-1.html-CVinZTO4.js" as="script"><link rel="prefetch" href="/assets/14-补环境-2.html-B_X2y3BW.js" as="script"><link rel="prefetch" href="/assets/15-补环境-3.html-B7PcV3_h.js" as="script"><link rel="prefetch" href="/assets/16-cookie专题-1.html-IkVwk3el.js" as="script"><link rel="prefetch" href="/assets/17-cookie专题-2.html-BL9u67Hs.js" as="script"><link rel="prefetch" href="/assets/18-cookie专题-3.html-DLiVo_Hy.js" as="script"><link rel="prefetch" href="/assets/19-验证码专题-1.html-BmG8-X2N.js" as="script"><link rel="prefetch" href="/assets/20.考试题目.html-CKyEb9EP.js" as="script"><link rel="prefetch" href="/assets/22.页面打开抓包工具就关闭页面调试方法.html-B72Q3yWf.js" as="script"><link rel="prefetch" href="/assets/404.html-Bj_n76Nh.js" as="script"><link rel="prefetch" href="/assets/index.html-BHx8PPOe.js" as="script"><link rel="prefetch" href="/assets/index.html-ByeAlyOn.js" as="script"><link rel="prefetch" href="/assets/index.html-CZF9jA5l.js" as="script"><link rel="prefetch" href="/assets/index.html-CDYgX5Dv.js" as="script"><link rel="prefetch" href="/assets/index.html-DMrO0kp9.js" as="script"><link rel="prefetch" href="/assets/index.html-yFhmZtM6.js" as="script"><link rel="prefetch" href="/assets/index.html-dPVfRcif.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">学习笔记</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/python/1.python%E5%9F%BA%E7%A1%80/" aria-label="python"><!---->python<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/" aria-label="数据库"><!---->数据库<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">1.python基础</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2.爬虫</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">1.爬虫基础</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2.js逆向</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/01-JS%E5%9F%BA%E7%A1%80.html" aria-label="01-JS基础"><!---->01-JS基础<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/02-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B0%83%E8%AF%95.html" aria-label="02-浏览器调试"><!---->02-浏览器调试<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/03-hook%E8%B0%83%E8%AF%95.html" aria-label="03-hook调试"><!---->03-hook调试<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/04-JS%E8%B0%83%E7%94%A8%E5%92%8C%E6%89%A3%E4%BB%A3%E7%A0%81.html" aria-label="04-JS调用和扣代码"><!---->04-JS调用和扣代码<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/05-%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95.html" aria-label="05-哈希算法"><!---->05-哈希算法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/06-%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86.html" aria-label="06-对称加密"><!---->06-对称加密<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/07-%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86.html" aria-label="07-非对称加密"><!---->07-非对称加密<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/08-webpack%E4%B8%93%E9%A2%98.html" aria-label="08-webpack专题"><!---->08-webpack专题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/09-sm%E5%9B%BD%E5%AF%86%E7%B3%BB%E5%88%97.html" aria-label="09-sm国密系列"><!---->09-sm国密系列<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/10-ob%E6%B7%B7%E6%B7%86%E4%B8%93%E9%A2%98.html" aria-label="10-ob混淆专题"><!---->10-ob混淆专题<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/11-AST%E8%8A%82%E7%82%B9%E6%A0%91%E4%B8%93%E9%A2%98.html" aria-label="11-AST节点树专题"><!---->11-AST节点树专题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/12-RPC%E6%8A%80%E6%9C%AF.html" aria-label="12-RPC技术"><!---->12-RPC技术<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/13-%E8%A1%A5%E7%8E%AF%E5%A2%83-1.html" aria-label="13-补环境-1"><!---->13-补环境-1<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/14-%E8%A1%A5%E7%8E%AF%E5%A2%83-2.html" aria-label="14-补环境-2"><!---->14-补环境-2<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/15-%E8%A1%A5%E7%8E%AF%E5%A2%83-3.html" aria-label="15-补环境-3"><!---->15-补环境-3<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/16-cookie%E4%B8%93%E9%A2%98-1.html" aria-label="16-cookie专题-1"><!---->16-cookie专题-1<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/17-cookie%E4%B8%93%E9%A2%98-2.html" aria-label="17-cookie专题-2"><!---->17-cookie专题-2<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/18-cookie%E4%B8%93%E9%A2%98-3.html" aria-label="18-cookie专题-3"><!---->18-cookie专题-3<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/19-%E9%AA%8C%E8%AF%81%E7%A0%81%E4%B8%93%E9%A2%98-1.html" aria-label="19-验证码专题-1"><!---->19-验证码专题-1<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/20.%E8%80%83%E8%AF%95%E9%A2%98%E7%9B%AE.html" aria-label="20.考试题目"><!---->20.考试题目<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/2.js%E9%80%86%E5%90%91/22.%E9%A1%B5%E9%9D%A2%E6%89%93%E5%BC%80%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E5%B0%B1%E5%85%B3%E9%97%AD%E9%A1%B5%E9%9D%A2%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95.html" aria-label="22.打开控制台就关闭页面"><!---->22.打开控制台就关闭页面<!----></a></li></ul></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->11-AST节点树专题</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mister-hope.com" target="_blank" rel="noopener noreferrer">YL</a></span><span property="author" content="YL"></span></span><!----><!----><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 24 分钟</span><meta property="timeRequired" content="PT24M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ast-技术专题">AST 技术专题</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#一-什么是-ast-技术">一. 什么是 AST 技术</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#二-ast-语法学习">二.AST 语法学习</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#三-案例实战">三.案例实战</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#四-ob-混淆解析工具">四.ob 混淆解析工具</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h2 id="ast-技术专题" tabindex="-1"><a class="header-anchor" href="#ast-技术专题"><span>AST 技术专题</span></a></h2><p><strong>学习目标:</strong></p><ol><li>了解 ast 执行过程</li><li>了解 ast 语法转换方式</li><li>熟悉 如何转换代码</li><li>熟练 使用 babel 执行命令</li></ol><p><strong>前言:</strong></p><p>**V8 引擎介绍(js 的解释器): **</p><blockquote><p>当前百花齐放的编程语言，主要分为编译型语言和解释型语言。</p></blockquote><ol><li>编译型语言的特点是在代码运行前编译器直接将对应的代码转换成机器码，运行时不需要再重新翻 译，直接可以使用编译后的结果。</li><li>解释型语言也是需要将代码转换成机器码，但是和编译型的区别在于运行时需要转换。比较显著的 特点是，解释型语言的执行速度要慢于编译型语言，因为解释型语言每次执行都需要把源码转换一 次才能执行。</li><li>大多数解释性语言都需要通过解析源代码来构建 AST，以便在运行时执行代码。AST 是解释器的中间表示，它有助于实现代码的语义解释和执行。然后，解释器可以遍历 AST 并执行相应的操作来模拟代码的行为。</li></ol><p><strong>V8 引擎执行 JS 代码都要经过哪些阶段</strong></p><ol><li><code>Parse</code>阶段： V8 引擎负责将 JS 代码转换成 AST （抽象语法树）；</li><li><code>Ignition</code>阶段：解释器将 AST 转换为字节码，解析执行字节码也会为下一个阶段优化编译提供需要 的信息；</li><li><code>TurboFan </code>阶段：编译器利用上个阶段收集的信息，将字节 码优化为可以执行的机器码；</li><li><code>Orinoco</code>阶段：垃圾回收阶段，将程序中不再使用的内存空间进行回收。</li></ol><blockquote><p>其中，生成 AST 、生成字节码、生成机器码是比较重要的三个阶段。</p></blockquote><p><strong>学习的目的</strong></p><figure><img src="/assets/063-Bq2mN-fJ.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="一-什么是-ast-技术" tabindex="-1"><a class="header-anchor" href="#一-什么是-ast-技术"><span>一. 什么是 AST 技术</span></a></h3><p>​ <code>AST</code> （Abstract Syntax Tree），译为抽象语法树，是编译原理中的一个概念，为源代码的抽象语法结构的树状表示，树上的每个节点都表示源代码中的一种结构，这种数据结构可以类别为一个大的 JSON 对象。通过 <code>AST</code> 技术，我们面对的就不再是各种符号混杂空格而成的文本字符串，而是一个严谨规范的 树形结构，我们可以通过对 AST 树节点的一系列操作，借助机器高效且精准地修改代码。 <code>AST </code>的用途很广， IDE 的语法高亮、代码检查、格式化、压缩、转译等，都需要先将代码转化成 AST 再进行后续的操作， ES5 和 ES6 语法差异，为了向后兼容，在实际应用中需要进行语法的转换，也会用到 <code>AST</code> 。 <code>AST </code>并不是为了逆向而生，但做逆向学会了<code>AST</code> ，在解混淆时可以如鱼得水.</p><p>AST 的用途很广， IDE 的语法高亮、代码检查、格式化、压缩、转译等，都需要先将代码转化成 AST 再进行后续的操作</p><blockquote><p>通过 AST 解析网站：https://astexplorer.net/，左侧为我们要输入的 JavaScript 代码，右 侧为 AST 树状结构</p></blockquote><figure><img src="/assets/064-CaTVM7LI.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_1-ast-对爬虫的意义" tabindex="-1"><a class="header-anchor" href="#_1-ast-对爬虫的意义"><span>1. AST 对爬虫的意义</span></a></h4><ul><li>随着技术的革新，越来越多的前端为了保护其网站不被第三方爬取，使用了大量的混淆代码，让爬虫工 程师越来越难找到其核心参数加密代码。有时候定位到加密的地方，面对一大坨乱如麻的代码，内心也是拒绝的。</li><li>这个时候，希望有一种工具，尽可能的将被混淆的代码进行处理，使其可读性大大增加，使爬虫工程师 能够轻而易举的进行定位，抠出其核心的加密代码。</li><li>AST 用在这里，只是一种辅助工具，并不能直接帮你找到核心的代码，还是得自己去分析，静态分析也好，动态调试也好，目的只有一个</li></ul><h4 id="_2-ast-在编译中的位置-编译器转换过程" tabindex="-1"><a class="header-anchor" href="#_2-ast-在编译中的位置-编译器转换过程"><span>2.AST 在编译中的位置(编译器转换过程)</span></a></h4><blockquote><p>在编译原理中，编译器转换代码通常要经过六个步骤(其中词法分析, 语法分析, 代码生成是我们重点关注的)</p></blockquote><h5 id="_1-词法分析" tabindex="-1"><a class="header-anchor" href="#_1-词法分析"><span>1. 词法分析</span></a></h5><ul><li>这个阶段会将源代码拆成最小的、不可再分的词法单元，称为 <code>token </code>。比如这行代码<code> var a =1</code> ；通常会被分解成 <code>var 、a、=、1、</code>; 这五个词法单元。另外刚才代码中的空格在 JavaScript 中是直接忽略的。</li><li>比如一下这一句话</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>2019年是祖国70周年</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>我们可以把这句话拆分成最小单元，即：2019 年、是、祖国、70、周年。这就是我们所说的分词，也是最小单元，因为如果我们把它再拆分出去的话，那就没有什么实际意义了。</li><li><code>Javascript</code> 代码中的语法单元主要包括以下这么几种： <ul><li>关键字：例如 <code>var</code>、<code>let</code>、<code>const</code>等</li><li>标识符：没有被引号括起来的连续字符，可能是一个变量，也可能是 <code>if</code>、<code>else</code> 这些关键字，又或者是 <code>true</code>、<code>false</code> 这些内置常量</li><li>运算符： <code>+</code>、<code>-</code>、 <code>*</code>、<code>/</code> 等</li><li>数字：像十六进制，十进制，八进制以及科学表达式等语法</li><li>字符串：因为对计算机而言，字符串的内容会参与计算或显示</li><li>空格：连续的空格，换行，缩进等</li><li>注释：行注释或块注释都是一个不可拆分的最小语法单元</li><li>其他：大括号、小括号、分号、冒号等</li></ul></li></ul><h5 id="_2-语法分析" tabindex="-1"><a class="header-anchor" href="#_2-语法分析"><span>2. 语法分析</span></a></h5><ul><li>这个过程是将词法单元转换成一个由元素逐级嵌套所组成的代表了程序语法结构的树， 这个树被称为抽象语法树</li><li>上面我们已经得到了我们分词的结果，需要将词汇进行一个立体的组合，确定词语之间的关系，确定词语最终的表达含义。</li><li>简而言之，语法分析是对分词的语法进行归类和结构化</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 举例</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 42</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> addA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> addA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>会将所有的分词进行分类</li></ul><figure><img src="/assets/065-cw7EbbXw.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h5 id="_3-语义分析" tabindex="-1"><a class="header-anchor" href="#_3-语义分析"><span>3.<strong>语义分析</strong></span></a></h5><ul><li>在 AST 上进行语义分析，检查变量使用是否合法，进行类型检查，生成符号表，检查函数调用等。这是确保源代码语义正确性的重要步骤。</li></ul><h5 id="_4-代码生成" tabindex="-1"><a class="header-anchor" href="#_4-代码生成"><span>4.<strong>代码生成</strong></span></a></h5><ul><li>在 AST 上应用各种优化技术，并将 AST 转换为目标代码，可以是机器代码、字节码或其他形式的代码。这是生成可执行代码的最终阶段。</li></ul><h5 id="_5-链接" tabindex="-1"><a class="header-anchor" href="#_5-链接"><span>5.<strong>链接</strong></span></a></h5><ul><li>如果源代码包含多个文件，链接阶段将这些文件合并成一个可执行文件，解决符号引用等。</li></ul><h5 id="_6-加载和执行" tabindex="-1"><a class="header-anchor" href="#_6-加载和执行"><span>6.<strong>加载和执行</strong></span></a></h5><ul><li>生成的目标代码或可执行文件被加载到内存中并执行。</li></ul><figure><img src="/assets/066-CdsiZ13d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="二-ast-语法学习" tabindex="-1"><a class="header-anchor" href="#二-ast-语法学习"><span>二.AST 语法学习</span></a></h3><ul><li>参考地址：https://www.babeljs.cn/docs/</li><li>在线解析：https://astexplorer.net</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//练习语法</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\u0068\u0065\u006c\u006c\u006f\u002c\u0041\u0053\u0054</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-ast-输出树结构" tabindex="-1"><a class="header-anchor" href="#_1-ast-输出树结构"><span>1. AST 输出树结构</span></a></h4><ol><li>type: 表示当前节点的类型，我们常用的类型判断方法,就是判断当前的节点是否为某个类型。</li><li>start: 表示当前节点的起始位。</li><li>end: 表示当前节点的末尾。</li><li>loc : 表示当前节点所在的行列位置，里面也有 start 与 end 节点，这里的 start 与上面的 start 是不同 的，这里的 start 是表示节点所在起始的行列位置，而 end 表示的是节点所在末尾的行列位置。</li><li>errors:是 File 节点所特有的属性，可以不用理会。</li><li>program:包含整个源代码，不包含注释节点。 <ol><li>sourceType: 通常用于标识源代码的类型，以告诉解析器或编译器它正在处理的代码是模块代码还是脚本代码(<strong>Script</strong>, <strong>Module</strong>)</li><li>body:包含了程序的主体代码，即程序的主要逻辑。 <ol><li><strong>语句块</strong>：&quot;body&quot; 可能表示一组语句，通常是一个代码块，这些语句按顺序执行。</li><li><strong>函数体</strong>：对于函数或方法定义，&quot;body&quot; 包含了函数的主体代码，即函数内部的语句和逻辑。</li><li><strong>类定义</strong>：对于类定义，&quot;body&quot; 可能包含类的成员，如属性和方法。</li><li><strong>模块内容</strong>：对于模块或文件，&quot;body&quot; 可能包含文件中的顶级语句和声明。</li><li><code>declarations</code>:通常用于表示变量、常量、函数、类等的声明</li><li><code>id</code>:是函数,变量,类的名称</li><li><code>init</code>: 通常代表声明的初始化值</li></ol></li></ol></li><li>comments:源代码中所有的注释会在这里显示。</li></ol><h4 id="_2-常见节点类型" tabindex="-1"><a class="header-anchor" href="#_2-常见节点类型"><span>2.常见节点类型</span></a></h4><figure><img src="/assets/067-D1ht9pUD.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_3-babel库学习" tabindex="-1"><a class="header-anchor" href="#_3-babel库学习"><span>3.<code>babel</code>库学习</span></a></h4><p>​ 根据官网介绍,它是一个 JavaScript 编译器，主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容 的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中。</p><ol><li><code>@babel/core</code> ：Babel 编译器本身，提供了 babel 的编译 API；</li><li><code>@babel/parser </code>：将 JavaScript 代码解析成 AST 语法树；</li><li><code>@babel/traverse</code> ：遍历、修改 AST 语法树的各个节点；</li><li><code>@babel/generator</code> ：将 AST 还原成 JavaScript 代码；</li><li><code>@babel/types</code> ：判断、验证节点的类型、构建新 AST 节点等。</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 安装命令</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">npm</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> install</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">babel</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">core</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> --</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">save</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-parser-库使用" tabindex="-1"><a class="header-anchor" href="#_1-parser-库使用"><span>1. parser 库使用</span></a></h5><ul><li>将 JavaScript 源代码 转换成一棵 AST 树、返回结果(在这里赋值给 ast )是一个 JSON 结构的数据</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@babel/parser&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// JS 转 ast语法树</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `var a = &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\u0068\u0065\u006c\u006c\u006f\u002c\u0041\u0053\u0054</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;;`</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ast</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">stringify</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ast</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-traverse-库学习" tabindex="-1"><a class="header-anchor" href="#_2-traverse-库学习"><span>2. traverse 库学习</span></a></h5><ul><li>节点插件编写与节点转化</li><li>你可以使用 <code>traverse</code> 函数来遍历 AST。通常，你需要提供两个参数：AST 和访问器对象。</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@babel/parser&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> traverse</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@babel/traverse&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">default</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// JS 转 ast语法树</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `var a = &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\u0068\u0065\u006c\u006c\u006f\u002c\u0041\u0053\u0054</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;;`</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 转换js代码为ast树结构</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ast</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 用查找定位节点(ast结构树, 访问器对象)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">traverse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ast</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">	// 定位VariableDeclarator类别,path是定位之后的地址</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    VariableDeclarator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Found identifier:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_1-path-属性语法学习" tabindex="-1"><a class="header-anchor" href="#_1-path-属性语法学习"><span>1. path 属性语法学习</span></a></h6><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>var a = &quot;\u0068\u0065\u006c\u006c\u006f\u002c\u0041\u0053\u0054&quot;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>path.node </code>:表示当前 path 下的 node 节点</li><li><code>path.toString()</code> :当前路径所对应的源代码</li><li><code>path.parentPath</code> :用于获取当前 path 下的父 path，多用于判断节点类型</li><li><code>path.container</code> :用于获取当前 path 下的所有兄弟节点(包括自身)</li><li><code>path.type</code> :获取当前节点类型</li><li><code>path.get(&#39;&#39;)</code> :获取 path 的子路径</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const parse = require(&#39;@babel/parser&#39;)</span></span>
<span class="line"><span>const traverse = require(&#39;@babel/traverse&#39;).default</span></span>
<span class="line"><span>// JS 转 ast语法树</span></span>
<span class="line"><span>jscode = `var a = &quot;\u0068\u0065\u006c\u006c\u006f\u002c\u0041\u0053\u0054&quot;;</span></span>
<span class="line"><span>var a = &quot;1111&quot;;`</span></span>
<span class="line"><span>// 转换js代码为ast树结构</span></span>
<span class="line"><span>let ast = parse.parse(jscode);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 用查找定位节点(ast结构树, 访问器对象)</span></span>
<span class="line"><span>traverse(ast, {</span></span>
<span class="line"><span>    VariableDeclarator(path){</span></span>
<span class="line"><span>        // console.log(path.node); // 表示当前path下的node节点</span></span>
<span class="line"><span>        // console.log(path.type) // 获取当前节点类型</span></span>
<span class="line"><span>        // console.log(path.toString()); // 用来获取当前遍历path的js源代码</span></span>
<span class="line"><span>        // console.log(path.parentPath.node); //用于获取当前path下的父path，多用于判断节点类型</span></span>
<span class="line"><span>        // console.log(path.get(&#39;init&#39;).toString()); // 获取下面的节点</span></span>
<span class="line"><span>        // console.log(path.container); // 用于获取当前path下的所有兄弟节点(包括自身)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>         // 只获取一个数据</span></span>
<span class="line"><span>        console.log(path.node.init.value);</span></span>
<span class="line"><span>        // 找到第一个后，可以停止遍历</span></span>
<span class="line"><span>        // path.stop();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2-替换原有节点" tabindex="-1"><a class="header-anchor" href="#_2-替换原有节点"><span>2. 替换原有节点</span></a></h6><ul><li>path.replaceWith :(单)节点替换函数 <ul><li>还原数字相加： var b = 1 + 2</li><li>还原字符串拼接： var c = &quot;coo&quot; + &quot;kie&quot;</li><li>还原在一行的： var a = 1+1,b = 2+2;var c = 3;</li><li>还原在一行的： var d = &quot;1&quot; + 1;</li><li>还原在一行的： var e = 1 + &#39;2&#39;;</li></ul></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const parse = require(&#39;@babel/parser&#39;)</span></span>
<span class="line"><span>const traverse = require(&#39;@babel/traverse&#39;).default</span></span>
<span class="line"><span>const types = require(&#39;@babel/types&#39;)</span></span>
<span class="line"><span>const generator = require(&quot;@babel/generator&quot;).default;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>// JS 转 ast语法树</span></span>
<span class="line"><span>jscode = `var b = 1 + 2;</span></span>
<span class="line"><span>var c = &quot;coo&quot; + &quot;kie&quot;;</span></span>
<span class="line"><span>var a = 1+1,b = 2+2;</span></span>
<span class="line"><span>var c = 3;</span></span>
<span class="line"><span>var d = &quot;1&quot; + 1;</span></span>
<span class="line"><span>var e = 1 + &#39;2&#39;;</span></span>
<span class="line"><span>`</span></span>
<span class="line"><span>// 转换js代码为ast树结构</span></span>
<span class="line"><span>let ast = parse.parse(jscode);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 用查找定位节点(ast结构树, 访问器对象)</span></span>
<span class="line"><span>traverse(ast, {</span></span>
<span class="line"><span>    BinaryExpression(path) {</span></span>
<span class="line"><span>        // 取出数组数据的单独对象</span></span>
<span class="line"><span>        var {left, operator, right} = path.node</span></span>
<span class="line"><span>        // 数字相加处理</span></span>
<span class="line"><span>        if (types.isNumericLiteral(left) &amp;&amp; types.isNumericLiteral(right) &amp;&amp; operator == &quot;+&quot; || types.isStringLiteral(left) &amp;&amp; types.isStringLiteral(right)) {</span></span>
<span class="line"><span>            value = left.value + right.value</span></span>
<span class="line"><span>            // console.log(value);</span></span>
<span class="line"><span>            // 会把原来的节点当中的原来的值进行替换</span></span>
<span class="line"><span>            path.replaceWith(types.valueToNode(value))</span></span>
<span class="line"><span>            // console.log(path.parentPath.node)</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        if (types.isStringLiteral(left) &amp;&amp; types.isStringLiteral(right) &amp;&amp; operator == &quot;+&quot;) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            value = left.value + right.value</span></span>
<span class="line"><span>            // console.log(value);</span></span>
<span class="line"><span>            // 会把原来的节点当中的原来的值进行替换</span></span>
<span class="line"><span>            path.replaceWith(types.valueToNode(value))</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        if (types.isStringLiteral(left) &amp;&amp; types.isNumericLiteral(right) &amp;&amp; operator == &quot;+&quot; || types.isNumericLiteral(left) &amp;&amp; types.isStringLiteral(right)) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            value = left.value + right.value</span></span>
<span class="line"><span>            // console.log(value);</span></span>
<span class="line"><span>            // 会把原来的节点当中的原来的值进行替换</span></span>
<span class="line"><span>            path.replaceWith(types.valueToNode(value))</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span>// 将ast还原成JavaScript代码</span></span>
<span class="line"><span>let {code} = generator(ast);</span></span>
<span class="line"><span>console.log(code)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>replaceWithMultiple 多节点替换函数，调用方式</li></ul><blockquote><p>path.replaceWithMultiple(ArrayNode);</p></blockquote><ul><li>实参一般是 Array 类型，它只能用于 Array 的替换。</li><li>即所有需要替换的节点在一个 Array 里面 举例：对如下变量进行处理</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>替换前：var arr = &#39;3,4,0,5,1,2&#39;[&#39;split&#39;](&#39;,&#39;)</span></span>
<span class="line"><span>替换后：var arr = [&quot;3&quot;, &quot;4&quot;, &quot;0&quot;, &quot;5&quot;, &quot;1&quot;, &quot;2&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> generator</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@babel/generator&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@babel/parser&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> traverse</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@babel/traverse&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">default</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> types</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@babel/types&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// JS 转 ast语法树</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">var arr = &#39;3,4,0,5,1,2&#39;[&#39;split&#39;](&#39;,&#39;)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 转换js代码为ast树结构</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ast</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">traverse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ast</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    CallExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">callee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">arguments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">node</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> callee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> func</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> callee</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> arg</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> arguments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> res</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">func</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">](</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">arg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">replaceWithMultiple</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">valueToNode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">res</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 将ast还原成JavaScript代码</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> generator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ast</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_3-自执行方法还原" tabindex="-1"><a class="header-anchor" href="#_3-自执行方法还原"><span>3. 自执行方法还原</span></a></h6><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>!(function () {</span></span>
<span class="line"><span>    console.log(&#39;123&#39;)</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>插件编写</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const parse = require(&#39;@babel/parser&#39;)</span></span>
<span class="line"><span>const fs = require(&#39;fs&#39;)</span></span>
<span class="line"><span>const traverse = require(&quot;@babel/traverse&quot;).default;</span></span>
<span class="line"><span>const types = require(&quot;@babel/types&quot;);</span></span>
<span class="line"><span>const generator = require(&quot;@babel/generator&quot;).default;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>process.argv.length &gt; 2 ? File1 = process.argv[2] : File1 = &#39;./_encode.js&#39;</span></span>
<span class="line"><span>process.argv.length &gt; 3 ? File2 = process.argv[2] : File2 = &#39;./_decode.js&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>jscode = fs.readFileSync(File1, {encoding: &#39;utf-8&#39;})</span></span>
<span class="line"><span>let ast = parse.parse(jscode);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const _jy = {</span></span>
<span class="line"><span>    UnaryExpression(path) {</span></span>
<span class="line"><span>        let {argument} = path.node;</span></span>
<span class="line"><span>        if (!types.isFunctionExpression(argument)) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        let {body, id, params} = argument;</span></span>
<span class="line"><span>        if (id != null || params.length != 0) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        path.replaceWithMultiple(body.body)</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>traverse(ast, _jy)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let {code} = generator(ast);</span></span>
<span class="line"><span>console.log(code);</span></span>
<span class="line"><span>fs.writeFile(File2, code, (err) =&gt; {</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_4-通用插件" tabindex="-1"><a class="header-anchor" href="#_4-通用插件"><span>4.通用插件</span></a></h6><blockquote><p>假设 var d = true ? 1 : 2;还需要编写插件规则，有没有通用模板？</p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const parse = require(&#39;@babel/parser&#39;)</span></span>
<span class="line"><span>const fs = require(&#39;fs&#39;)</span></span>
<span class="line"><span>const traverse = require(&quot;@babel/traverse&quot;).default;</span></span>
<span class="line"><span>const types = require(&quot;@babel/types&quot;);</span></span>
<span class="line"><span>const generator = require(&quot;@babel/generator&quot;).default;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>process.argv.length &gt; 2 ? File1 = process.argv[2] : File1 = &#39;./_encode.js&#39;</span></span>
<span class="line"><span>process.argv.length &gt; 3 ? File2 = process.argv[2] : File2 = &#39;./_decode.js&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>jscode = fs.readFileSync(File1, {encoding: &#39;utf-8&#39;})</span></span>
<span class="line"><span>let ast = parse.parse(jscode);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const _jy = {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    &quot;BinaryExpression|UnaryExpression|ConditionalExpression&quot;(path) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        // 防止溢出</span></span>
<span class="line"><span>        if (path.isUnaryExpression({operator: &quot;-&quot;}) ||</span></span>
<span class="line"><span>            path.isUnaryExpression({operator: &quot;void&quot;})) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        const {confident, value} = path.evaluate();</span></span>
<span class="line"><span>        if (!confident)</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        if (typeof value == &#39;number&#39; &amp;&amp; (!Number.isFinite(value))) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        path.replaceWith(types.valueToNode(value));</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>traverse(ast, _jy)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let {code} = generator(ast);</span></span>
<span class="line"><span>console.log(code);</span></span>
<span class="line"><span>fs.writeFile(File2, code, (err) =&gt; {</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_5-evaluate-方法学习" tabindex="-1"><a class="header-anchor" href="#_5-evaluate-方法学习"><span>5. evaluate()方法学习</span></a></h6><ul><li><p>针对作用域和引用，直接依据引用来计算出执行结果。</p></li><li><p>列子 1</p></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>navigator[&quot;\x75\x73&quot;+&quot;\x65\x72&quot;+&quot;\x41\x67&quot;+&quot;\x65\x6e&quot;+&quot;\x74&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>例子 2：</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>function _xl(){</span></span>
<span class="line"><span>	x = 1 + 2 + 3 +4 + 5 + 6 + 7</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>插件编写</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>visitor2 = {</span></span>
<span class="line"><span>    &quot;BinaryExpression|Identifier&quot;(path) {</span></span>
<span class="line"><span>        const {confident, value} = path.evaluate();</span></span>
<span class="line"><span>        confident &amp;&amp; path.replaceInline(types.valueToNode(value))</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>traverse(ast, visitor2)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_6-编码类型还原" tabindex="-1"><a class="header-anchor" href="#_6-编码类型还原"><span>6. 编码类型还原</span></a></h6><ul><li>处理前:</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>var a = 0x25,b = 0b10001001,c = 0o123456,</span></span>
<span class="line"><span>d = &quot;\x68\x65\x6c\x6c\x6f\x2c\x41\x53\x54&quot;,</span></span>
<span class="line"><span>e = &quot;\u0068\u0065\u006c\u006c\u006f\u002c\u0041\u0053\u0054&quot;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>处理后</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>var a = 37,b = 137,c = 42798,d = &quot;hello,AST&quot;,e = &quot;hello,AST&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>插件编写:</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const transform_literal = {</span></span>
<span class="line"><span>    NumericLiteral({node}) {</span></span>
<span class="line"><span>        if (node.extra &amp;&amp; /^0[obx]/i.test(node.extra.raw)) {</span></span>
<span class="line"><span>            node.extra = undefined;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    StringLiteral({node}) {</span></span>
<span class="line"><span>        if (node.extra &amp;&amp; /\\[ux]/gi.test(node.extra.raw)) {</span></span>
<span class="line"><span>            node.extra = undefined;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>traverse(ast, transform_literal)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-合并变量声明与定义-这里的声明与定义是紧挨着。" tabindex="-1"><a class="header-anchor" href="#_7-合并变量声明与定义-这里的声明与定义是紧挨着。"><span>7. 合并变量声明与定义，这里的声明与定义是紧挨着。</span></a></h6><ul><li>处理前:</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>var a,b,c;</span></span>
<span class="line"><span>a = 1;</span></span>
<span class="line"><span>b = 2;</span></span>
<span class="line"><span>c = 3;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>处理后:</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>var a = 1,b=2,c = 3;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>插件编写</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> combinDefineAndNextAssgin</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        VariableDeclarator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">init</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> nextSibling</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getNextSibling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">nextSibling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isExpressionStatement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> expression</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> nextSibling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">expression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isAssignmentExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">expression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//非赋值语句直接return</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">left</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">operator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">right</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> expression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isIdentifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">left</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> operator</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;=&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//是否可以合并。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;init&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">right</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            nextSibling</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">traverse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ast</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">combinDefineAndNextAssgin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_8-方法还原" tabindex="-1"><a class="header-anchor" href="#_8-方法还原"><span>8. 方法还原</span></a></h6><ul><li>处理前</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>function xl (arg,arg1){</span></span>
<span class="line"><span>    return arg + arg1</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>var xx = xl(&#39;\u0068\u0065\u006c\u006c\u006f&#39;,&#39;\u002c\u0041\u0053\u0054&#39;) // --- &gt; var xx = &#39;hello ast&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>处理后</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>var xx = &#39;hello ast&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>插件编写</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;@babel/parser&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;fs&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> traverse</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@babel/traverse&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> types</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@babel/types&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> generator</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@babel/generator&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;"> ?</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> File1</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> File1</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;./_encode.js&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;"> ?</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> File2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">argv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> File2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;./_decode.js&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">File1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">encoding</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;utf-8&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ast</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jscode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 判断类型是是不是字面量</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Array</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isArray</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">every</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">ele</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ele</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isBinaryExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">left</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">right</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isUnaryExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;operator&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isUnaryExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;operator&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;+&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    })) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">argument</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isObjectExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">every</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">property</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isArrayExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">elements</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">elements</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> elements</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">every</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">element</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">element</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> CalcCallExpression</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    FunctionDeclaration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> len</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isReturnStatement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">len</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // path.scope.getBinding 方法获取与该标识符相关联的绑定</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> binding</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBinding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // constant 属性表示标识符是否被认为是常量。如果标识符绑定在一个不可修改的值上（如字面量或函数声明），则该属性为 true</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">binding</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">binding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">constant</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // binding.referenced 是一个属性，用于判断绑定对象是否在代码中被引用 引用true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // parentPath.isProgram 方法来检查节点是否为顶级程序节点 顶级程序节点表示整个程序的根节点 最外层</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">binding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">referenced</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isProgram</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        // 定位到计算的方法</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> sourceCode</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">sourceCode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">includes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;try&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> sourceCode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">includes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;random&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> sourceCode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">includes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Date&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            //返回值不唯一不做处理</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        //直接eval，如果缺环境，让其主动报错，再补上即可。下同,函数声明eval不会报错。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        eval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">sourceCode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> canRemoved</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            // binding.referencePaths 是 Babel AST 绑定对象的属性，用于获取与该绑定相关联的所有引用路径。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> referPath</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> of</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> binding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">referencePaths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> referPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isCallExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;callee&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">                    canRemoved</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    continue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> arguments</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">arguments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">arguments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isNodeLiteral</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">arguments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">                    canRemoved</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    continue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> eval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;function&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;"> typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;undefined&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">                    canRemoved</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    continue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;--&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">                parentPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">replaceWith</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">valueToNode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            canRemoved</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    },</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">traverse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ast</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">CalcCallExpression</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">} </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> generator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ast</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">writeFile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">File2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-fs-库学习" tabindex="-1"><a class="header-anchor" href="#_3-fs-库学习"><span>3.fs 库学习</span></a></h5><blockquote><p>安装命令 npm install fs</p></blockquote><ul><li>读取文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>jscode = fs.readFileSync(&#39;encode.js&#39;,{encoding:&#39;utf-8&#39;})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>写入文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>fs.writeFile(&#39;decode.js&#39;, code, (err)=&gt;{});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="_4-generator库学习" tabindex="-1"><a class="header-anchor" href="#_4-generator库学习"><span>4. <code>generator</code>库学习</span></a></h5><ul><li>生成新的 js code ，并保存到文件中输出</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const generator = require(&quot;@babel/generator&quot;).default;</span></span>
<span class="line"><span>let {code} = generator(ast);</span></span>
<span class="line"><span>_fs.writeFile(&#39;decode.js&#39;, code, (err)=&gt;{});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>删除所有注释</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const {code} = generator(ast,opts = {&quot;comments&quot;:false});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Unicode 转中文或者其他非 ASCII 码字符。 是否压缩代码</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const output = generator(ast,opts = {jsescOption:{&quot;minimal&quot;:true}},code);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="三-案例实战" tabindex="-1"><a class="header-anchor" href="#三-案例实战"><span>三.案例实战</span></a></h3><h4 id="_1-ob-混淆高级-1" tabindex="-1"><a class="header-anchor" href="#_1-ob-混淆高级-1"><span>1. OB 混淆高级 1</span></a></h4><ul><li>打开著名的 JavaScript 在线混淆网站:</li></ul><blockquote><p>https://obfuscator.io</p></blockquote><ul><li>解析最高级的 ob 混淆</li></ul><h5 id="_1-解析混淆" tabindex="-1"><a class="header-anchor" href="#_1-解析混淆"><span>1. 解析混淆</span></a></h5><ul><li>定位你需要解析的数据</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>// 举例, 需要解析混淆之后的这种类型的代码</span></span>
<span class="line"><span>function _0x10de60(_0x37ef9e, _0x34cea9, _0x424356, _0x5b8b31, _0x530358) {</span></span>
<span class="line"><span>    return _0x3cf5(_0x37ef9e - 0x24b, _0x5b8b31);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>_0x10de60(0x3fb, 0x507, 0x44c, &#39;vT&amp;^&#39;, 0x4fd)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在代码中抠出执行返回数据的代码</li></ul><figure><img src="/assets/068-BV_hz542.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>和网页执行 js 之后进行对比,看看数据解析的是否正确</li><li>在控制台添加代码段,执行前先打上断点,搜索你解析的位置断点查看数据</li></ul><h5 id="_2-ast-还原" tabindex="-1"><a class="header-anchor" href="#_2-ast-还原"><span>2. ast 还原</span></a></h5><ul><li>首先找到混淆的代码和我们刚刚执行的方法一样的代码,需要满足这样的规则</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>function _0x10de60(_0x37ef9e, _0x34cea9, _0x424356, _0x5b8b31, _0x530358) {</span></span>
<span class="line"><span>    return _0x3cf5(_0x37ef9e - 0x24b, _0x5b8b31);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>// 收集方法</span></span>
<span class="line"><span>let fun_code = &#39;&#39;</span></span>
<span class="line"><span>let fun_name = []</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 找到需要替换的方法</span></span>
<span class="line"><span>const _func = {</span></span>
<span class="line"><span>    // 获取到所有的方法类型的ast节点</span></span>
<span class="line"><span>    FunctionDeclaration(path) {</span></span>
<span class="line"><span>        // 取出节点中的id, params, body</span></span>
<span class="line"><span>        let {id, params, body} = path.node;</span></span>
<span class="line"><span>        // 判断接受的参数长度是不是5, 函数代码长度是不是1</span></span>
<span class="line"><span>        if (params.length != 5 || body.body.length != 1) {</span></span>
<span class="line"><span>            return</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        // 判断函数的数据是不是一个返回语句</span></span>
<span class="line"><span>        if (!types.isReturnStatement(body.body[0])) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        fun_code += path.toString()</span></span>
<span class="line"><span>        fun_name.push(id.name)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>traverse(ast, _func)</span></span>
<span class="line"><span>// 执行方法  把方法都加载到当前的环境</span></span>
<span class="line"><span>eval(fun_code)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在获取到 js 里面调用的位置,需要满足<code>_0x10de60(0x3fb, 0x507, 0x44c, &#39;vT&amp;^&#39;, 0x4fd)</code>这种规则</li><li>获取到符合这个规则的代码,然后通过 eval 来执行,因为这些方法我们已经全部扣下来了,所以是可以进行调用的</li><li>判断这个方法名字有没有在我们上面的函数中出现</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>// 判断类型是是不是字面量</span></span>
<span class="line"><span>function isNodeLiteral(node) {</span></span>
<span class="line"><span>    if (Array.isArray(node)) {</span></span>
<span class="line"><span>        return node.every(ele =&gt; isNodeLiteral(ele));</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if (types.isLiteral(node)) {</span></span>
<span class="line"><span>    	if (node.value == null)</span></span>
<span class="line"><span>    	{</span></span>
<span class="line"><span>    		return false;</span></span>
<span class="line"><span>    	}</span></span>
<span class="line"><span>      return true;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if(types.isBinaryExpression(node))</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>    	return isNodeLiteral(node.left) &amp;&amp; isNodeLiteral(node.right);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if (types.isUnaryExpression(node, {</span></span>
<span class="line"><span>        &quot;operator&quot;: &quot;-&quot;</span></span>
<span class="line"><span>    }) || types.isUnaryExpression(node, {</span></span>
<span class="line"><span>        &quot;operator&quot;: &quot;+&quot;</span></span>
<span class="line"><span>    })) {</span></span>
<span class="line"><span>        return isNodeLiteral(node.argument);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    if (types.isObjectExpression(node)) {</span></span>
<span class="line"><span>        let { properties } = node;</span></span>
<span class="line"><span>        if (properties.length == 0) {</span></span>
<span class="line"><span>            return true;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        return properties.every(property =&gt; isNodeLiteral(property));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if (types.isArrayExpression(node)) {</span></span>
<span class="line"><span>        let { elements } = node;</span></span>
<span class="line"><span>        if (elements.length == 0) {</span></span>
<span class="line"><span>            return true;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        return elements.every(element =&gt; isNodeLiteral(element));</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return false;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>const _xx = {</span></span>
<span class="line"><span>    CallExpression(path) {</span></span>
<span class="line"><span>        // 获取到执行方法的节点,得到callee和arguments</span></span>
<span class="line"><span>        let {callee, arguments} = path.node;</span></span>
<span class="line"><span>        // 判断执行的这个名字是不是一个标识符,方法有没有在我们刚刚抠出来的函数里面</span></span>
<span class="line"><span>        if (!types.isIdentifier(callee) || !fun_name.includes(callee.name)) {</span></span>
<span class="line"><span>            return</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        // 判断方法</span></span>
<span class="line"><span>        if (!arguments.length == 5 || !isNodeLiteral(arguments)) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        // console.log(path.toString())</span></span>
<span class="line"><span>        // console.log(111111)</span></span>
<span class="line"><span>        // 获取到符合要求的代码数据,并且执行</span></span>
<span class="line"><span>        let value = eval(path.toString())</span></span>
<span class="line"><span>        console.log(path.toString(),&#39;----&gt;&#39; ,value)</span></span>
<span class="line"><span>        // 将结果替换成执行之后的结果</span></span>
<span class="line"><span>        path.replaceWith(types.valueToNode(value))</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>traverse(ast, _xx)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>在将字符串拼接的问题解决</p></li><li><p>在把文件的编码也全部解决</p></li><li><p>最终代码</p></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const parse = require(&#39;@babel/parser&#39;)</span></span>
<span class="line"><span>const fs = require(&#39;fs&#39;)</span></span>
<span class="line"><span>const traverse = require(&quot;@babel/traverse&quot;).default;</span></span>
<span class="line"><span>const types = require(&quot;@babel/types&quot;);</span></span>
<span class="line"><span>const generator = require(&quot;@babel/generator&quot;).default;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>process.argv.length &gt; 2 ? File1 = process.argv[2] : File1 = &#39;./_encode.js&#39;</span></span>
<span class="line"><span>process.argv.length &gt; 3 ? File2 = process.argv[2] : File2 = &#39;./_decode.js&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>jscode = fs.readFileSync(File1, {encoding: &#39;utf-8&#39;})</span></span>
<span class="line"><span>let ast = parse.parse(jscode);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 需要通过这个代码才能还原原本的数据,才能执行这些方法</span></span>
<span class="line"><span>(function (_0xa8ec3d, _0x2606de) {</span></span>
<span class="line"><span>    var _0x478f6c = _0xa8ec3d();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    function _0x2c978f(_0x81c36a, _0x5a59fd, _0x1deaca, _0x4f8a4a, _0x5be23b) {</span></span>
<span class="line"><span>        return _0x3cf5(_0x5be23b - -0x1dc, _0x1deaca);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    function _0x2af083(_0x3033fc, _0x57432a, _0x11ac40, _0x4423ed, _0x407b57) {</span></span>
<span class="line"><span>        return _0x3cf5(_0x57432a - 0x2a5, _0x4423ed);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    function _0x45fe89(_0x144f7d, _0x43c342, _0x3f94a5, _0x4554dc, _0x4477fb) {</span></span>
<span class="line"><span>        return _0x3cf5(_0x4477fb - -0x14f, _0x43c342);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    function _0xa98447(_0x1b3bb3, _0x43843c, _0x5dd756, _0x276faf, _0x3bed7b) {</span></span>
<span class="line"><span>        return _0x3cf5(_0x43843c - 0x193, _0x5dd756);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    function _0x30e393(_0x20d513, _0x1b8618, _0x3633fc, _0x455543, _0x476f9d) {</span></span>
<span class="line"><span>        return _0x3cf5(_0x1b8618 - 0x231, _0x455543);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    while (!![]) {</span></span>
<span class="line"><span>        try {</span></span>
<span class="line"><span>            var _0x3d4edf = -parseInt(_0x2af083(0x677, 0x631, 0x6f1, &#39;T&amp;$^&#39;, 0x610)) / (-0xc * -0x25c + -0x1169 + 0x573 * -0x2) + parseInt(_0x2af083(0x58d, 0x5eb, 0x516, &#39;5*Kw&#39;, 0x6c6)) / (0x112c + 0x57 * 0x46 + -0x28f4) * (-parseInt(_0xa98447(0x4b8, 0x4b0, &#39;L82p&#39;, 0x4a6, 0x4ce)) / (0x71d * -0x5 + -0x5 * -0x4ff + 0xa99)) + parseInt(_0xa98447(0x476, 0x3af, &#39;qgCF&#39;, 0x2a5, 0x491)) / (-0x3b2 + 0x2ac + 0x7 * 0x26) * (parseInt(_0x2af083(0x66c, 0x634, 0x727, &#39;L82p&#39;, 0x588)) / (-0xa22 + 0x5 * 0x43 + 0x8d8)) + -parseInt(_0xa98447(0x3e6, 0x344, &#39;vT&amp;^&#39;, 0x269, 0x333)) / (-0x2 * -0xf53 + 0x26e1 + 0x7b9 * -0x9) + parseInt(_0x2af083(0x5c4, 0x4c2, 0x405, &#39;#2rS&#39;, 0x4b5)) / (0x1 * 0x2119 + -0x4b1 + -0x1c61) * (-parseInt(_0xa98447(0x4e0, 0x426, &#39;ZcMD&#39;, 0x4fe, 0x3d7)) / (0x15fc * -0x1 + 0x4fb + -0x31 * -0x59)) + parseInt(_0x30e393(0x5b6, 0x4a2, 0x520, &#39;L82p&#39;, 0x527)) / (0x171 * -0xa + 0x15 * -0x15a + 0x2ad5) * (parseInt(_0x2c978f(0x8a, 0x154, &#39;RNcz&#39;, 0x84, 0x94)) / (-0x1663 + -0x1 * -0x10a3 + -0xf7 * -0x6)) + -parseInt(_0x2af083(0x501, 0x4d3, 0x59a, &#39;WNR(&#39;, 0x449)) / (0x2 * 0x9e9 + -0x228a + 0xec3) * (-parseInt(_0xa98447(0x49c, 0x3c3, &#39;LDmE&#39;, 0x30a, 0x3a2)) / (0x66f + 0xe25 + 0x18 * -0xdb));</span></span>
<span class="line"><span>            if (_0x3d4edf === _0x2606de) break; else _0x478f6c[&#39;push&#39;](_0x478f6c[&#39;shift&#39;]());</span></span>
<span class="line"><span>        } catch (_0x26a20f) {</span></span>
<span class="line"><span>            _0x478f6c[&#39;push&#39;](_0x478f6c[&#39;shift&#39;]());</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}(_0x2c4e, -0x1127f + 0x105241 + -0x52ff3));</span></span>
<span class="line"><span>function _0x3cf5(_0x43ba1f,_0x430c41){var _0x50958e=_0x2c4e();return _0x3cf5=function(_0x1ebf43,_0x3465d6){_0x1ebf43=_0x1ebf43-(-0x397*0x8+0x248a+ -0x632);var _0x3370b8=_0x50958e[_0x1ebf43];if(_0x3cf5[&#39;AatHvX&#39;]===undefined){var _0xa2d549=function(_0x28385a){var _0x2e18f7=&#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=&#39;;var _0x178072=&#39;&#39;,_0x492491=&#39;&#39;,_0x58f562=_0x178072+_0xa2d549;for(var _0x15163c=0x341+ -0x4*-0x52f+0x45*-0x59,_0x4e0ca7,_0x6210d3,_0x2413e1=0x1cdd*-0x1+ -0x2*0x163+0x5b*0x59;_0x6210d3=_0x28385a[&#39;charAt&#39;](_0x2413e1++);~_0x6210d3&amp;&amp;(_0x4e0ca7=_0x15163c%(-0x25d5*0x1+ -0x31a*0x9+0x1c7*0x25)?_0x4e0ca7*(-0xf06+0x6*-0xbf+ -0x9e0*-0x2)+_0x6210d3:_0x6210d3,_0x15163c++%(-0x1*-0x19f9+0x3*-0xbd8+0x2b*0x39))?_0x178072+=_0x58f562[&#39;charCodeAt&#39;](_0x2413e1+(0x2083+0x124d*0x2+0x1*-0x4513))-(-0x1*0x3a1+ -0xe3*-0x1+0x2c8)!==-0x5*-0x517+0xe76+0x11*-0x259?String[&#39;fromCharCode&#39;](-0x107b+ -0x1*0x4bb+ -0xf*-0x17b&amp;_0x4e0ca7&gt;&gt;(-(0x2456*0x1+ -0xb3b+ -0x1919)*_0x15163c&amp;0x1*0x9bb+0x1*0xf63+0x4*-0x646)):_0x15163c:-0x178c+0x10ab+0x6e1){_0x6210d3=_0x2e18f7[&#39;indexOf&#39;](_0x6210d3)}for(var _0x744be1=-0x3*-0x161+0x17*-0x7+ -0x382,_0x28b33f=_0x178072[&#39;length&#39;];_0x744be1&lt;_0x28b33f;_0x744be1++){_0x492491+=&#39;%&#39;+(&#39;00&#39;+_0x178072[&#39;charCodeAt&#39;](_0x744be1)[&#39;toString&#39;](0x1d3+0x18b4+ -0x10f*0x19))[&#39;slice&#39;](-(0x1df3+ -0x2444+0x653))}return decodeURIComponent(_0x492491)};var _0x3c0acf=function(_0x2e84c5,_0x1862f9){var _0x5bc8d1=[],_0x5005f4=-0xf94+0x1*0x25c9+ -0x1635,_0x209431,_0x11e8b4=&#39;&#39;;_0x2e84c5=_0xa2d549(_0x2e84c5);var _0x33b05b;for(_0x33b05b=-0x22f9+0x1*-0xef8+0x31f1;_0x33b05b&lt;0x58d+0x91d*-0x1+0x490;_0x33b05b++){_0x5bc8d1[_0x33b05b]=_0x33b05b}for(_0x33b05b=0x814*0x1+ -0x2037+0x1823;_0x33b05b&lt;-0x7+ -0x413*-0x6+0xb*-0x221;_0x33b05b++){_0x5005f4=(_0x5005f4+_0x5bc8d1[_0x33b05b]+_0x1862f9[&#39;charCodeAt&#39;](_0x33b05b%_0x1862f9[&#39;length&#39;]))%(0x4c*-0x45+0x2088+ -0xb0c),_0x209431=_0x5bc8d1[_0x33b05b],_0x5bc8d1[_0x33b05b]=_0x5bc8d1[_0x5005f4],_0x5bc8d1[_0x5005f4]=_0x209431}_0x33b05b=-0x1ea*-0x7+0xbd8*-0x1+ -0x18e,_0x5005f4=-0x677*-0x3+ -0x1cb6+0x35*0x2d;for(var _0x5496a7=0x402+0xca9+ -0x10ab;_0x5496a7&lt;_0x2e84c5[&#39;length&#39;];_0x5496a7++){_0x33b05b=(_0x33b05b+(-0xb8*-0x13+0x309*-0x7+ -0xc*-0xa2))%(0x18bb+0x25ff*0x1+0x3dba*-0x1),_0x5005f4=(_0x5005f4+_0x5bc8d1[_0x33b05b])%(0x37*-0x45+0x12e+0xea5),_0x209431=_0x5bc8d1[_0x33b05b],_0x5bc8d1[_0x33b05b]=_0x5bc8d1[_0x5005f4],_0x5bc8d1[_0x5005f4]=_0x209431,_0x11e8b4+=String[&#39;fromCharCode&#39;](_0x2e84c5[&#39;charCodeAt&#39;](_0x5496a7)^_0x5bc8d1[(_0x5bc8d1[_0x33b05b]+_0x5bc8d1[_0x5005f4])%(-0x10af*-0x2+0x137d+ -0x33db)])}return _0x11e8b4};_0x3cf5[&#39;daLkGh&#39;]=_0x3c0acf,_0x43ba1f=arguments,_0x3cf5[&#39;AatHvX&#39;]=!![]}var _0x5d420c=_0x50958e[0xfd*0x22+ -0x1e17+0x1*-0x383],_0x40d8e6=_0x1ebf43+_0x5d420c,_0x475b00=_0x43ba1f[_0x40d8e6];if(!_0x475b00){if(_0x3cf5[&#39;WokXLu&#39;]===undefined){var _0x3113ab=function(_0x5417dd){this[&#39;alfNlI&#39;]=_0x5417dd,this[&#39;NFJXUT&#39;]=[-0xd7e+ -0x3*0xa7e+0x1d*0x18d,-0x2703+ -0xcc5+0x33c8,0x192f+0x2218+ -0x3b47],this[&#39;LiZPGu&#39;]=function(){return&#39;newState&#39;},this[&#39;NsljsG&#39;]=&#39;\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*&#39;,this[&#39;lalJRX&#39;]=&#39;[\x27|\x22].+[\x27|\x22];?\x20*}&#39;};_0x3113ab[&#39;prototype&#39;][&#39;nAxlXC&#39;]=function(){var _0x2948ef=new RegExp(this[&#39;NsljsG&#39;]+this[&#39;lalJRX&#39;]),_0x2921b4=_0x2948ef[&#39;test&#39;](this[&#39;LiZPGu&#39;][&#39;toString&#39;]())?--this[&#39;NFJXUT&#39;][0x999+ -0x7*-0x3b7+ -0x2399]:--this[&#39;NFJXUT&#39;][-0x21b2+ -0x126f+0xa6d*0x5];return this[&#39;CmyLjs&#39;](_0x2921b4)},_0x3113ab[&#39;prototype&#39;][&#39;CmyLjs&#39;]=function(_0x170023){if(!Boolean(~_0x170023))return _0x170023;return this[&#39;XatjfO&#39;](this[&#39;alfNlI&#39;])},_0x3113ab[&#39;prototype&#39;][&#39;XatjfO&#39;]=function(_0x265cde){for(var _0x5dcbbe=-0x1*-0x2152+ -0x1*-0x9d2+ -0x2b24,_0x398ae1=this[&#39;NFJXUT&#39;][&#39;length&#39;];_0x5dcbbe&lt;_0x398ae1;_0x5dcbbe++){this[&#39;NFJXUT&#39;][&#39;push&#39;](Math[&#39;round&#39;](Math[&#39;random&#39;]())),_0x398ae1=this[&#39;NFJXUT&#39;][&#39;length&#39;]}return _0x265cde(this[&#39;NFJXUT&#39;][-0x1*-0x3f1+ -0xe90+0xa9f])},new _0x3113ab(_0x3cf5)[&#39;nAxlXC&#39;](),_0x3cf5[&#39;WokXLu&#39;]=!![]}_0x3370b8=_0x3cf5[&#39;daLkGh&#39;](_0x3370b8,_0x3465d6),_0x43ba1f[_0x40d8e6]=_0x3370b8}else _0x3370b8=_0x475b00;return _0x3370b8},_0x3cf5(_0x43ba1f,_0x430c41)}function _0x2c4e(){var _0xdf2a2a=[&#39;sSk0jmoxWQ4&#39;,&#39;g8kqW7nJW5i&#39;,&#39;WPWYvmo9WOy&#39;,&#39;W7NdLCoRWOFcNa&#39;,&#39;omoyW6ZdNGe&#39;,&#39;WO8ujMZdIW&#39;,&#39;qSoYWPLBW4y&#39;,&#39;WQLdhHdcUq&#39;,&#39;Cf0qW6ZcSW&#39;,&#39;WQeTsSoYWO8&#39;,&#39;W7VcPrW9W7e&#39;,&#39;W40DW5dcRg8&#39;,&#39;e8kbDSoCWQm&#39;,&#39;W44pW6WIiq&#39;,&#39;WQLsW5PfWQK&#39;,&#39;W5VdMqegWPm&#39;,&#39;j2BdO0xdHq&#39;,&#39;WPyusmoZWQq&#39;,&#39;WRlcPNRdPhS&#39;,&#39;aIFcTKFcNG&#39;,&#39;WOGrv8oCWOy&#39;,&#39;Bg/dH8orhq&#39;,&#39;a8oyAetcSa&#39;,&#39;l8kpFSokWO0&#39;,&#39;wmoUWPe&#39;,&#39;WOOtsSobWPy&#39;,&#39;eZZcT0dcTW&#39;,&#39;WRGlouRdUa&#39;,&#39;fxJdNhRdUa&#39;,&#39;muRdN0tdGG&#39;,&#39;W7KqbCkpjW&#39;,&#39;mmoeW4/dIbO&#39;,&#39;BSkrbmoxFq&#39;,&#39;qfFdLSo6lq&#39;,&#39;WQSWW414ea&#39;,&#39;W6dcS8k6vaW&#39;,&#39;WQftdSkl&#39;,&#39;WOTgWRpdRYJcULhdHmkuumk3WRX6&#39;,&#39;W7RcT8k2WPNdPW&#39;,&#39;t8kMACkZW4O&#39;,&#39;WPJdKbNdQKi&#39;,&#39;WOead2hdQW&#39;,&#39;w305W67cPG&#39;,&#39;W7m9WQupAG&#39;,&#39;DSkaDbpdQW&#39;,&#39;fX3cTNTM&#39;,&#39;emkdx8o9WRC&#39;,&#39;cSkItCkrW4y&#39;,&#39;W7eDWPOSqG&#39;,&#39;n8orW7VdRWO&#39;,&#39;msJcRcm&#39;,&#39;W6XjfmkyW5BdMrvRcgL1Aa&#39;,&#39;WRmwBCo6WOu&#39;,&#39;W5hdPmk7W7rK&#39;,&#39;CCo1fZ90kmk5W5a&#39;,&#39;WOSvWOJdQqa&#39;,&#39;FSkFW74&#39;,&#39;ymkQFmk0W7u&#39;,&#39;sSo4W4FdNJK&#39;,&#39;WRCqwSoGWOa&#39;,&#39;ruO9W5FcLq&#39;,&#39;s8olWObrW5S&#39;,&#39;W4eYW582ja&#39;,&#39;W7hcQ8k7&#39;,&#39;ybWJrMK&#39;,&#39;mCkMwmopWRm&#39;,&#39;W6PrWPvsW60&#39;,&#39;eCoxW4RdNYK&#39;,&#39;WOmhkeRcOa&#39;,&#39;zCokWQXvW6W&#39;,&#39;W57cSmkisG0&#39;,&#39;jrdcU01m&#39;,&#39;sSkZk8onWRq&#39;,&#39;k8oilCoIF8k5vJS&#39;,&#39;W5XWdH3dQq&#39;,&#39;W4ioW6qLdG&#39;,&#39;W4b0WOjG&#39;,&#39;BSk4W70bwq&#39;,&#39;tvJdHCoK&#39;,&#39;l8ohz8oIAmkdBsNdMG&#39;,&#39;agCdW5yy&#39;,&#39;DmkifSoGtG&#39;,&#39;WQpdT8kuhmo6&#39;,&#39;W5C7W5RcKha&#39;,&#39;DSoUWRvZW7W&#39;,&#39;WRe6zCopWPy&#39;,&#39;eCowW5FdLZK&#39;,&#39;W4fYWPLQW6e&#39;,&#39;W7WKcSkh&#39;,&#39;iSo8FMBcUW&#39;,&#39;WQ0aWOBdIH8&#39;,&#39;hmkjW5jgW6u&#39;,&#39;zGmZz2a&#39;,&#39;W6NdS8oFWRNcRa&#39;,&#39;xvldPSokhq&#39;,&#39;W6bNWQnRW5m&#39;,&#39;W5dcNXC9W5S&#39;,&#39;BSoEW4tdKJ0&#39;,&#39;WQLHaqdcIW&#39;,&#39;WQWyqSocWOC&#39;,&#39;WOycCNtdLG&#39;,&#39;smoiW7JdPtm&#39;,&#39;W6NcLYtdTLG&#39;,&#39;xSkCj8oRvG&#39;,&#39;eCk3W4lcL1m&#39;,&#39;W6jGWR3cRbC&#39;,&#39;W68bW4VcTM4&#39;,&#39;yCkQqJBdRa&#39;,&#39;CfCEW4FcSq&#39;,&#39;WQ1SoXtcVG&#39;,&#39;WQ04uCozWRG&#39;,&#39;W7tdOmohWRNcTW&#39;,&#39;FSkBnCow&#39;,&#39;WRuZW7TcnW&#39;,&#39;WRu7W7DGlq&#39;,&#39;g1ddQ0RdMa&#39;,&#39;W7lcPSkrWQ7dKa&#39;,&#39;fmonW47dOHe&#39;,&#39;h8o8WRhdJI0&#39;,&#39;WOK3W4vEeG&#39;,&#39;DSoFW7ldQaW&#39;,&#39;WPe2WOVdTay&#39;,&#39;vgtdJSogaq&#39;,&#39;WQKksSodWPm&#39;,&#39;WRldVSokW5On&#39;,&#39;W71RoqVdQa&#39;,&#39;jCkDW4VcIfe&#39;,&#39;W687WQCJsW&#39;,&#39;W7fXWOxcJJO&#39;,&#39;W5pcNJmIW5W&#39;,&#39;WOVdHe5+WOyIfu4eyfFcN8kL&#39;,&#39;g8owChVcIW&#39;,&#39;WQuVDCopWPi&#39;,&#39;DmkEW7C8rG&#39;,&#39;W7pcRSkDWRxdIq&#39;,&#39;W7ddQ8kEfGu&#39;,&#39;v8kll8oKBa&#39;,&#39;uvxdK8oebG&#39;,&#39;W4RcGCkoWQ7dNa&#39;,&#39;W5BcMXW&#39;,&#39;Cgvnmq&#39;,&#39;W4PtWOpcPr8&#39;,&#39;W7vIWP/cMsy&#39;,&#39;WPGRs8oGWOC&#39;,&#39;weRdNmoFjq&#39;,&#39;WPynW7Tjmq&#39;,&#39;hmkfW618W4C&#39;,&#39;WP11fq/cNG&#39;,&#39;W7tdJmoaWRRcOq&#39;,&#39;WQ4lv8ohWQW&#39;,&#39;ctRcNhLN&#39;,&#39;WPmjjuFdSW&#39;,&#39;WOW3WPzdW54&#39;,&#39;WOKwsmo0WQG&#39;,&#39;xCkBD8kjW6i&#39;,&#39;WPL2W4D4&#39;,&#39;WPpcTXVcVr0&#39;,&#39;WPfVW4rdWP0&#39;,&#39;WP7cQvfU&#39;,&#39;WQGsjx7dVW&#39;,&#39;falcQN7cTa&#39;,&#39;lCkEghhcHW&#39;,&#39;hmoPC8kiW7ddSSkQgf1byW&#39;,&#39;tmk4bSoBWOi&#39;,&#39;W5GIW4eBea&#39;,&#39;WRNcVdBcQq&#39;,&#39;W7SeW6ubfq&#39;,&#39;yCk9j8o4WRC&#39;,&#39;Eeb2iu0&#39;,&#39;qmkzAmkwW5a&#39;,&#39;WP5mu1/cLq&#39;,&#39;wmkzDCkf&#39;,&#39;i8onW7/dHWe&#39;,&#39;WOm5aNldGW&#39;,&#39;jmknW4NcJL0&#39;,&#39;gCk/bSkyW7a&#39;,&#39;W5n2cJRdHa&#39;,&#39;W58viSk0jq&#39;,&#39;D8khjCoqzW&#39;,&#39;fSoMWQRdJdO&#39;,&#39;qSknwIZdQq&#39;,&#39;xmoRWOrkW6S&#39;,&#39;WQGCqSoz&#39;,&#39;hfxdK2JdSW&#39;,&#39;eXJcRgBcVG&#39;,&#39;W5yVWQuRsG&#39;,&#39;ft/cTvdcOq&#39;,&#39;t3FdS8oflW&#39;,&#39;WOWQW5i4&#39;,&#39;WRiYW4erta&#39;,&#39;rqZdISkIfW&#39;,&#39;z8kaW7qKEq&#39;,&#39;lMldQghdJa&#39;,&#39;WO8MWPj/W5y&#39;,&#39;s8ozWRLLBG&#39;,&#39;nJJcVSopWOy&#39;,&#39;vr42AG&#39;,&#39;W7yqW7pcILi&#39;,&#39;zmkOCmklW6e&#39;,&#39;u8kjmmooWOO&#39;,&#39;vMCmW4pcIa&#39;,&#39;hCkSdCk0W7W&#39;,&#39;W6NdT8obWRNcTG&#39;,&#39;WRyhc1RdOG&#39;,&#39;b8oyW4RdUXO&#39;,&#39;gmk7W67cRxC&#39;,&#39;dhOE&#39;,&#39;W6CIb8kadG&#39;,&#39;WO8BaxNdSq&#39;,&#39;c3O4W7Se&#39;,&#39;W4DvWQNcUsO&#39;,&#39;nmo3WRpdQbi&#39;,&#39;gmkRW58zWRC&#39;,&#39;W6HpWPvgW5O&#39;,&#39;kNyjW6iJ&#39;,&#39;WOhcRSoQg8oi&#39;,&#39;C8kqma&#39;,&#39;fXxcPhJcUa&#39;,&#39;wg7dPmo8bG&#39;,&#39;x0JdMmoZhW&#39;,&#39;omkkarfy&#39;,&#39;W5HsWPXGW6ldJCoVvq&#39;,&#39;W4JcJ8k1yr8&#39;,&#39;WOmWqcBdOW&#39;,&#39;W4TQWPv1W6C&#39;,&#39;C8ozWQvOW5O&#39;,&#39;tNBdVmoHgW&#39;,&#39;W70NWOW+FG&#39;,&#39;W6rypYhdOG&#39;,&#39;WQNdSSoJWQlcTYe0&#39;,&#39;WRRcPsJcOsO&#39;,&#39;b8ovW7hdPa0&#39;,&#39;o8ofWRtdQW4&#39;,&#39;WR0fW6DxjW&#39;,&#39;c3JdILNdOW&#39;,&#39;W6pdSmknW4Lp&#39;,&#39;W5tdKmojWRBcNq&#39;,&#39;W5fsW4WHWOZcHmoUxSoyW48JuW&#39;,&#39;WR7dRSoseKZcKSoKs8kMc3BdRXi&#39;,&#39;ax4nW6eT&#39;,&#39;WP/dVmkTcCos&#39;,&#39;W5W+W5dcLvK&#39;,&#39;m8okfMNcLq&#39;,&#39;fHNcSxXK&#39;,&#39;W5b7WQVcUGK&#39;,&#39;xCkvWPBcOem&#39;,&#39;WQWCu8oA&#39;,&#39;W5m1W4dcGfq&#39;,&#39;WPiHWOj4W4e&#39;,&#39;t1SgW7pcHa&#39;,&#39;z1tdOCoUaG&#39;,&#39;cCkqW69MW58&#39;,&#39;FMLnmMK&#39;,&#39;W7C4W5CrkW&#39;,&#39;smkVtSkMW6W&#39;,&#39;WRPEWObdvXRdNxTHoCow&#39;,&#39;zCkeW7O7xq&#39;,&#39;WRxcSSohWPjPW4qbBq4v&#39;,&#39;WQ3cMH3cPaO&#39;,&#39;jCo/s2ZcMq&#39;,&#39;WRGYW4fccq&#39;,&#39;uLddU8osiW&#39;,&#39;WQJcScZcHd0&#39;,&#39;kmk1asDB&#39;,&#39;WQFdKqtdT3W&#39;,&#39;W74wWQisEq&#39;,&#39;haFcPmo2WRO&#39;,&#39;kCksvCoiWO0&#39;,&#39;pmovvLpcNq&#39;,&#39;WOibySoyWOe&#39;,&#39;WQWaumol&#39;,&#39;WOjTW414WRW&#39;,&#39;D8kSFYy&#39;,&#39;fNeyW4ip&#39;,&#39;o8kWW7NcNfK&#39;,&#39;ySklW5yOFq&#39;,&#39;W5GmcSkGlW&#39;,&#39;s8o6W6xdVrG&#39;,&#39;W4HGWP7cTHS&#39;,&#39;CYfzfda&#39;,&#39;iSkicSk4W7i&#39;,&#39;W54SW7DUgW&#39;,&#39;WP1OW55oWRO&#39;,&#39;W4pdUSo7WQxcVq&#39;,&#39;o8o4W6ZdIHW&#39;,&#39;zwfwd1S&#39;,&#39;B1ddJCoTja&#39;,&#39;ytymDum&#39;,&#39;W6a7W4mXbG&#39;,&#39;W7S+W5VcGeS&#39;,&#39;WOKDia&#39;,&#39;WOKLdK3dUG&#39;,&#39;W6NcLtm2W48&#39;,&#39;WRJcUJBcVJW&#39;,&#39;eLddKxVdOG&#39;,&#39;WQjmW5XVWOO&#39;,&#39;qmk0wqVdUa&#39;,&#39;W7SMWOmMDa&#39;,&#39;W4VcKXibW4y&#39;,&#39;k8kar8kVW7i&#39;,&#39;WQKrl3NdVW&#39;,&#39;WQ/dPtldGKa&#39;,&#39;cmkfcmkKW4G&#39;,&#39;W7ldQ8kqW4G&#39;,&#39;cvFdQ0/dUa&#39;,&#39;WQKFWPRdNrq&#39;,&#39;W6HxW5VcULn3hSoylx/cG8kf&#39;,&#39;FKDInh4&#39;,&#39;W6ZcOmkVWOS&#39;,&#39;W61OWOLGW48&#39;,&#39;W6RcQ8o8WOVdRq&#39;,&#39;W40aW6lcU3G&#39;,&#39;mCoEyhlcQG&#39;,&#39;WRxcSWdcNbG&#39;,&#39;m8kSW4NcQeC&#39;,&#39;vWZdTxBdQG&#39;,&#39;WP8Smv3dVq&#39;,&#39;W7lcKrCRW5e&#39;,&#39;af/dTxhdMG&#39;,&#39;WOuVxSokWQ0&#39;,&#39;WRugc37dNG&#39;,&#39;C0BdPx9eW7xdJdNcMG&#39;,&#39;Emo8qxKxymkxW6ddJ8k8qhO&#39;,&#39;eHFcS2tcVG&#39;,&#39;AfWQW70&#39;,&#39;W7RcU8k2Dbm&#39;,&#39;bmoYW47dLbi&#39;,&#39;tID/FJ0&#39;,&#39;WR5RBghcUG&#39;,&#39;pSkYgSkMW6q&#39;,&#39;FKqBW7VcTW&#39;,&#39;cmkEECoQWRC&#39;,&#39;WPNcSdRcVJ4&#39;,&#39;pSkiwSodWRC&#39;,&#39;W6b/WRJcRHO&#39;,&#39;vCkfW6OMsW&#39;,&#39;W4uQWRyZxa&#39;,&#39;W7SOdmkPeW&#39;,&#39;rSktW7OkDW&#39;,&#39;pCkQlHq&#39;,&#39;W5r2WONcKJC&#39;,&#39;amo3WQJdJG&#39;,&#39;W5OrW4/cLNS&#39;,&#39;CmoSmtNdOW&#39;,&#39;WPBdJ8kZe8ov&#39;,&#39;W53dI8oKWQhcRa&#39;,&#39;q8kWmCoFWOW&#39;,&#39;W4fhWOngW7S&#39;,&#39;F8k3ACk9W68&#39;,&#39;W781WRSKAW&#39;,&#39;AmoNW7tdTHy&#39;,&#39;WPmKW5W2WQdcT3ddNSkYlL7dQq&#39;,&#39;dJNcSxjN&#39;,&#39;WO3dP8kSgq&#39;,&#39;WQ8YASoFWPi&#39;,&#39;W5JcNruJ&#39;,&#39;tmo9vSoAWQqVWQ/cLW&#39;,&#39;WOqivSoDWQ0&#39;,&#39;uCorW6NdRq8&#39;,&#39;mCk2W5jfW4G&#39;,&#39;WPPRfG/cJq&#39;,&#39;WR8Sn0RdPW&#39;,&#39;WRVdHmkygSop&#39;,&#39;WPjHW554WQa&#39;,&#39;ySoRWPbiW7K&#39;,&#39;FvabW4VcNW&#39;,&#39;W6HyWOHmW5i&#39;,&#39;yCorW43dSa&#39;,&#39;W5nXbsddNG&#39;,&#39;A38hW6JcNa&#39;,&#39;WOLngsVcNa&#39;,&#39;F8kNW4eOwW&#39;,&#39;x8oZWOjaW6S&#39;,&#39;AZOAEvm&#39;,&#39;t8kyA8kLW7W&#39;,&#39;W7VcQSkYWOZdSq&#39;,&#39;WRmmWQhdJWG&#39;,&#39;eu3dO2ddTG&#39;,&#39;W74vWORdUbi&#39;,&#39;lgxdSuRdMW&#39;,&#39;ymkJqchdRq&#39;,&#39;jmksoSk4W68&#39;,&#39;pYxcPmo3WOa&#39;,&#39;W60yW47cT18&#39;,&#39;WPD+W4DzWOu&#39;,&#39;W63cSCkOWQRdOa&#39;,&#39;kYBcLNLi&#39;,&#39;W4rNgZy&#39;,&#39;pmktdmkcW54&#39;,&#39;W5BcMIiEW4G&#39;,&#39;WRH4pdZcHq&#39;,&#39;c8kQEmokWR4&#39;,&#39;Dwfpiuq&#39;,&#39;c8kgvmo2WQ4&#39;,&#39;cSkhdmkdW5W&#39;,&#39;W5vMcdBdMG&#39;,&#39;oSkdE8oQWQa&#39;,&#39;a8o5WONdLde&#39;,&#39;dfFdHK/dSa&#39;,&#39;WPL2W555WQC&#39;,&#39;WRxcJcZcTve&#39;,&#39;WPBdNmkipSoy&#39;,&#39;F1WBW5hcHa&#39;,&#39;d1GSW4q8&#39;,&#39;W5zcWRZcGrG&#39;,&#39;W7ddQmoFWQRcVq&#39;,&#39;w3WHW5BcOW&#39;,&#39;AmkBi8owFq&#39;,&#39;ymkwe8oSWOe&#39;,&#39;W45YWOS&#39;,&#39;WPjJD0JdVa&#39;,&#39;WQXRCgtcTW&#39;,&#39;WR43zmoPWQi&#39;,&#39;WRyxyCoLWOO&#39;,&#39;W4mOWPy4WOCUAwZdOc8&#39;,&#39;yNddLSozdW&#39;,&#39;De3dVSoGhG&#39;,&#39;lxxdPNFdMG&#39;,&#39;WOeqW5P8nq&#39;,&#39;WPvlsfZcKa&#39;,&#39;CfyBW4xcHa&#39;,&#39;ocqCB0y&#39;,&#39;W7fLWQ7cTae&#39;,&#39;W5G0WPSexa&#39;,&#39;ufpdHSoLhW&#39;,&#39;k0pdNvNdJa&#39;,&#39;vcrpWOvuWPGaA3yguSor&#39;,&#39;BK3dUCoggq&#39;,&#39;E0nUgwO&#39;,&#39;W6ZcQSkpWOVdTW&#39;,&#39;W54XWRi&#39;,&#39;x3u2W4hcUW&#39;,&#39;W61FWR7cQHC&#39;,&#39;WP9jwSkTzW&#39;,&#39;WOvwAudcKa&#39;,&#39;W57cImkBWRVdJW&#39;,&#39;lCojW77dVrG&#39;,&#39;h8k6W6DjW74&#39;,&#39;W4Wfd8kG&#39;,&#39;WRujWONdOW&#39;,&#39;k8oyvNNcJG&#39;,&#39;WQRcUIlcUGq&#39;,&#39;WQOmq8oAWO0&#39;,&#39;WR4oWOhdQa&#39;,&#39;W6/cSXOEW5q&#39;,&#39;WO8ACmoIWOS&#39;,&#39;W6JdSCklW5ri&#39;,&#39;WOedn1tdSq&#39;,&#39;iIeAnda&#39;,&#39;W6GHW4xcJfK&#39;,&#39;WPFcLW/cRZS&#39;,&#39;WPztveZcIa&#39;,&#39;BuyWW7FcUq&#39;,&#39;W5uLtSkwfq&#39;,&#39;WQGIWQVdJWa&#39;,&#39;q8oUW5zgW7y&#39;,&#39;WPqCfeZdUG&#39;,&#39;rCk9Fq/dSq&#39;,&#39;W7JcTCkXuqS&#39;,&#39;W5j1WP1mW68&#39;,&#39;sK3dMSo5hW&#39;,&#39;gCozW5xdQYK&#39;,&#39;W4e3WQ80EG&#39;,&#39;xSkje8o6BG&#39;,&#39;F8kDeSoSBq&#39;,&#39;rKPrexC&#39;,&#39;u3y8W6xcTa&#39;,&#39;wZCbA2a&#39;,&#39;F8kQnmoXEG&#39;,&#39;WPCxumoCWRe&#39;,&#39;fSoFW7ddJWa&#39;,&#39;AmkRn8o6WQm&#39;,&#39;W7NcTCkSWPpdVa&#39;,&#39;o2RdSvldTa&#39;,&#39;s8ktiCohtG&#39;,&#39;mmkEW6lcNvm&#39;,&#39;e8oiW5ddRrW&#39;,&#39;yYeFE10&#39;,&#39;WOBdICkacmo6&#39;,&#39;fCoTuwf+&#39;,&#39;W7/cUra3W58&#39;,&#39;W5jQW4T4WQy&#39;,&#39;ns/cSmojWOO&#39;,&#39;W4lcG8klzJO&#39;,&#39;hmk/W5pcRua&#39;,&#39;WRKYBSo/WPq&#39;,&#39;kXlcR2/cUa&#39;,&#39;qLpdSCoF&#39;,&#39;W6WeW5GgeW&#39;,&#39;hCkgbbTw&#39;,&#39;zg13bhC&#39;,&#39;hmkJW4DqW58&#39;,&#39;W6/cTCkmvG0&#39;,&#39;eCkPiIrq&#39;,&#39;ESk0itLnfSkm&#39;,&#39;W4yldCoSya&#39;,&#39;WPJdMcFdNxq&#39;,&#39;g8oEW4RdPWC&#39;,&#39;W4z3WPHvW5q&#39;,&#39;aCkoW7G&#39;,&#39;C3C+W5pcVG&#39;,&#39;DmowW5VdKHi&#39;,&#39;W6KbjSkKhq&#39;,&#39;FfddLCoHiW&#39;,&#39;WOHcWRBdOsxcVLBdV8kXCCk3WRbk&#39;,&#39;WQBdSSoDhYi&#39;,&#39;nb7cNxb3&#39;,&#39;WPK/l1xdGG&#39;,&#39;W4HrWRLWW4u&#39;,&#39;WPCBumo8WQ0&#39;,&#39;W47cKSkYWRpdIa&#39;,&#39;WPRcPs3cGrW&#39;,&#39;WPqNWR5xW5m&#39;,&#39;W4n7gGFdHG&#39;,&#39;WOBdOmkL&#39;,&#39;A2KnW6hcQa&#39;,&#39;WQGsWRHyW5S&#39;,&#39;yCoeW47dRLy&#39;,&#39;W47cKqGZ&#39;,&#39;W6VcSCk9WOVdOa&#39;,&#39;WO/cRrFcLWu&#39;,&#39;W6vtWQbiW4m&#39;,&#39;smk3W7b4W4O&#39;,&#39;A8oEW4y&#39;,&#39;rWKgrNG&#39;,&#39;tvntj3i&#39;,&#39;xCoeWPvuW6W&#39;,&#39;W4JcKSkeqqG&#39;,&#39;jsxcV8oiWOy&#39;,&#39;WQm4WRNcSHS&#39;,&#39;WRW6W4Pd&#39;,&#39;bNSxW4my&#39;,&#39;W4TZWOvW&#39;,&#39;wCkdW7qCra&#39;,&#39;W7G1W5dcV04&#39;,&#39;W53cVSo7tCkkW5/cPCkEq8kpq0rH&#39;,&#39;u8oPWPHw&#39;,&#39;WR7dQSoBfu7cLmoTwSk5bNldIXu&#39;,&#39;imkFjIfY&#39;,&#39;rCoLWOreW78&#39;,&#39;W4GCW70cfq&#39;,&#39;kSoEvM4&#39;,&#39;f2eAW4qd&#39;,&#39;iaxcOePj&#39;,&#39;W5vaWQdcKW0&#39;,&#39;pbpcUSo4WPO&#39;,&#39;W4ekiSkhiG&#39;,&#39;aqDHyWm&#39;,&#39;imkRaXTy&#39;,&#39;hCk0W6VcShm&#39;,&#39;WP5BbZ0&#39;,&#39;mIxcJSoK&#39;,&#39;kgqXW4az&#39;,&#39;zSkFW4KDFq&#39;];_0x2c4e=function(){return _0xdf2a2a};return _0x2c4e()}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 收集方法</span></span>
<span class="line"><span>let fun_code = &#39;&#39;</span></span>
<span class="line"><span>let fun_name = []</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 找到需要替换的方法</span></span>
<span class="line"><span>const _func = {</span></span>
<span class="line"><span>    // 获取到所有的方法类型的ast节点</span></span>
<span class="line"><span>    FunctionDeclaration(path) {</span></span>
<span class="line"><span>        // 取出节点中的id, params, body</span></span>
<span class="line"><span>        let {id, params, body} = path.node;</span></span>
<span class="line"><span>        // 判断接受的参数长度是不是5, 函数代码长度是不是1</span></span>
<span class="line"><span>        if (params.length != 5 || body.body.length != 1) {</span></span>
<span class="line"><span>            return</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        // 判断函数的数据是不是一个返回语句</span></span>
<span class="line"><span>        if (!types.isReturnStatement(body.body[0])) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        fun_code += path.toString()</span></span>
<span class="line"><span>        fun_name.push(id.name)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>traverse(ast, _func)</span></span>
<span class="line"><span>// 执行方法  把方法都加载到当前的环境</span></span>
<span class="line"><span>eval(fun_code)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 判断类型是是不是字面量</span></span>
<span class="line"><span>function isNodeLiteral(node) {</span></span>
<span class="line"><span>    if (Array.isArray(node)) {</span></span>
<span class="line"><span>        return node.every(ele =&gt; isNodeLiteral(ele));</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if (types.isLiteral(node)) {</span></span>
<span class="line"><span>    	if (node.value == null)</span></span>
<span class="line"><span>    	{</span></span>
<span class="line"><span>    		return false;</span></span>
<span class="line"><span>    	}</span></span>
<span class="line"><span>      return true;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if(types.isBinaryExpression(node))</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>    	return isNodeLiteral(node.left) &amp;&amp; isNodeLiteral(node.right);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if (types.isUnaryExpression(node, {</span></span>
<span class="line"><span>        &quot;operator&quot;: &quot;-&quot;</span></span>
<span class="line"><span>    }) || types.isUnaryExpression(node, {</span></span>
<span class="line"><span>        &quot;operator&quot;: &quot;+&quot;</span></span>
<span class="line"><span>    })) {</span></span>
<span class="line"><span>        return isNodeLiteral(node.argument);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    if (types.isObjectExpression(node)) {</span></span>
<span class="line"><span>        let { properties } = node;</span></span>
<span class="line"><span>        if (properties.length == 0) {</span></span>
<span class="line"><span>            return true;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        return properties.every(property =&gt; isNodeLiteral(property));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    if (types.isArrayExpression(node)) {</span></span>
<span class="line"><span>        let { elements } = node;</span></span>
<span class="line"><span>        if (elements.length == 0) {</span></span>
<span class="line"><span>            return true;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        return elements.every(element =&gt; isNodeLiteral(element));</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return false;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>const _xx = {</span></span>
<span class="line"><span>    CallExpression(path) {</span></span>
<span class="line"><span>        // 获取到执行方法的节点,得到callee和arguments</span></span>
<span class="line"><span>        let {callee, arguments} = path.node;</span></span>
<span class="line"><span>        // 判断执行的这个名字是不是一个标识符,方法有没有在我们刚刚抠出来的函数里面</span></span>
<span class="line"><span>        if (!types.isIdentifier(callee) || !fun_name.includes(callee.name)) {</span></span>
<span class="line"><span>            return</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        // 判断方法</span></span>
<span class="line"><span>        if (!arguments.length == 5 || !isNodeLiteral(arguments)) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        // console.log(path.toString())</span></span>
<span class="line"><span>        // console.log(111111)</span></span>
<span class="line"><span>        // 获取到符合要求的代码数据,并且执行</span></span>
<span class="line"><span>        let value = eval(path.toString())</span></span>
<span class="line"><span>        console.log(path.toString(),&#39;----&gt;&#39; ,value)</span></span>
<span class="line"><span>        // 将结果替换成执行之后的结果</span></span>
<span class="line"><span>        path.replaceWith(types.valueToNode(value))</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>traverse(ast, _xx)</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 通用字面量计算插件</span></span>
<span class="line"><span>const constantFold = {</span></span>
<span class="line"><span>    &quot;BinaryExpression|UnaryExpression|ConditionalExpression&quot;(path) {</span></span>
<span class="line"><span>        // 防止溢出</span></span>
<span class="line"><span>        if(path.isUnaryExpression({operator:&quot;-&quot;}) ||</span></span>
<span class="line"><span>    	   path.isUnaryExpression({operator:&quot;void&quot;}))</span></span>
<span class="line"><span>    	{</span></span>
<span class="line"><span>    		return;</span></span>
<span class="line"><span>    	}</span></span>
<span class="line"><span>        //计算值的</span></span>
<span class="line"><span>        const {confident, value} = path.evaluate();</span></span>
<span class="line"><span>        if (!confident)</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        //  Number.isFinite()用来检查一个数值是否为有限的（finite）。</span></span>
<span class="line"><span>        if (typeof value == &#39;number&#39; &amp;&amp; (!Number.isFinite(value))) {</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        path.replaceWith(types.valueToNode(value));</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>traverse(ast, constantFold);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 解决编码</span></span>
<span class="line"><span>const transform_literal = {</span></span>
<span class="line"><span>  NumericLiteral({node}) {</span></span>
<span class="line"><span>    if (node.extra &amp;&amp; /^0[obx]/i.test(node.extra.raw)) {</span></span>
<span class="line"><span>      node.extra = undefined;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  StringLiteral({node})</span></span>
<span class="line"><span>  {</span></span>
<span class="line"><span>    if (node.extra &amp;&amp; /\\[ux]/gi.test(node.extra.raw)) {</span></span>
<span class="line"><span>      node.extra = undefined;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>traverse(ast, transform_literal);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let {code} = generator(ast);</span></span>
<span class="line"><span>console.log(code);</span></span>
<span class="line"><span>fs.writeFile(File2, code, (err) =&gt; {</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>我们就能将这些方法来进行还原</li></ul><h4 id="_2-雪球案例" tabindex="-1"><a class="header-anchor" href="#_2-雪球案例"><span>2. 雪球案例</span></a></h4><ul><li>网址:https://xueqiu.com/today</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>const parse = require(&#39;@babel/parser&#39;)</span></span>
<span class="line"><span>const fs = require(&#39;fs&#39;)</span></span>
<span class="line"><span>const traverse = require(&quot;@babel/traverse&quot;).default;</span></span>
<span class="line"><span>const types = require(&quot;@babel/types&quot;);</span></span>
<span class="line"><span>const generator = require(&quot;@babel/generator&quot;).default;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>process.argv.length &gt; 2 ? File1 = process.argv[2] : File1 = &#39;./_encode.js&#39;</span></span>
<span class="line"><span>process.argv.length &gt; 3 ? File2 = process.argv[2] : File2 = &#39;./_decode.js&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>jscode = fs.readFileSync(File1, {encoding: &#39;utf-8&#39;})</span></span>
<span class="line"><span>let ast = parse.parse(jscode);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 解决编码</span></span>
<span class="line"><span>const transform_literal = {</span></span>
<span class="line"><span>  NumericLiteral({node}) {</span></span>
<span class="line"><span>    if (node.extra &amp;&amp; /^0[obx]/i.test(node.extra.raw)) {</span></span>
<span class="line"><span>      node.extra = undefined;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  StringLiteral({node})</span></span>
<span class="line"><span>  {</span></span>
<span class="line"><span>    if (node.extra &amp;&amp; /\\[ux]/gi.test(node.extra.raw)) {</span></span>
<span class="line"><span>      node.extra = undefined;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>traverse(ast, transform_literal);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let {code} = generator(ast);</span></span>
<span class="line"><span>console.log(code);</span></span>
<span class="line"><span>fs.writeFile(File2, code, (err) =&gt; {</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四-ob-混淆解析工具" tabindex="-1"><a class="header-anchor" href="#四-ob-混淆解析工具"><span>四.ob 混淆解析工具</span></a></h3><ul><li><p><code>decodeObfuscator-main</code> 可以解官网的 ob 混淆可以直接拿过来使用</p></li><li><p>使用方法</p></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>node main.js _encode.js _decode.js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>优点: <ul><li>官网的 ob 混淆都能进行解析</li></ul></li><li>缺点: <ul><li>只能解析官方的 ob 混淆</li></ul></li></ul><blockquote><p>一套混淆的程序稍作改动,ast 解析代码基本上都不能用了,需要大家慢慢去进行探索</p></blockquote></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/python/2.爬虫/2.js逆向/11-AST节点树专题.md" aria-label="编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CFFpmDzR.js" defer></script>
  </body>
</html>

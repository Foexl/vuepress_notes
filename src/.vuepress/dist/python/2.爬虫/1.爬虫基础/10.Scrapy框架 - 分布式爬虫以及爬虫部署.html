<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/10.Scrapy%E6%A1%86%E6%9E%B6%20-%20%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB%E4%BB%A5%E5%8F%8A%E7%88%AC%E8%99%AB%E9%83%A8%E7%BD%B2.html"><meta property="og:site_name" content="å­¦ä¹ ç¬”è®°"><meta property="og:title" content="10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½²"><meta property="og:description" content="1.scrapy-rediså®ç°å¢é‡çˆ¬è™« å¢é‡çˆ¬è™«çš„å«ä¹‰ åœ¨å‰é¢æˆ‘ä»¬å­¦ä¹ äº†å¯ä»¥åœ¨è¿è¡Œscrapyé¡¹ç›®æ—¶ï¼Œä½¿ç”¨scrpay crawl çˆ¬è™«å -s JOBDIR=xxxæ¥å®ç°æš‚åœã€æ¢å¤çˆ¬å–ï¼ˆå…¶å®å°±æ˜¯å¢é‡çˆ¬è™«ï¼Œå†æ¬¡è¿è¡Œæ—¶å¯ä»¥åœ¨ä¹‹å‰åŸºç¡€ä¸Šç»§ç»­çˆ¬ï¼‰ï¼Œè¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿå®ç°å¢é‡çˆ¬å–ï¼Œä½†æˆ‘ä»¬æ— æ³•ä»JOBDIRæŒ‡å®šçš„è·¯å¾„ä¸­çœ‹å‡ºæˆ‘ä»¬ç°åœ¨çˆ¬å–çš„æƒ…å†µã€‚ ä½¿ç”¨scrapy-..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="YL"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½²","image":[""],"dateModified":null,"author":[{"@type":"Person","name":"YL","url":"https://mister-hope.com"}]}</script><title>10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½² | å­¦ä¹ ç¬”è®°</title><meta name="description" content="1.scrapy-rediså®ç°å¢é‡çˆ¬è™« å¢é‡çˆ¬è™«çš„å«ä¹‰ åœ¨å‰é¢æˆ‘ä»¬å­¦ä¹ äº†å¯ä»¥åœ¨è¿è¡Œscrapyé¡¹ç›®æ—¶ï¼Œä½¿ç”¨scrpay crawl çˆ¬è™«å -s JOBDIR=xxxæ¥å®ç°æš‚åœã€æ¢å¤çˆ¬å–ï¼ˆå…¶å®å°±æ˜¯å¢é‡çˆ¬è™«ï¼Œå†æ¬¡è¿è¡Œæ—¶å¯ä»¥åœ¨ä¹‹å‰åŸºç¡€ä¸Šç»§ç»­çˆ¬ï¼‰ï¼Œè¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿå®ç°å¢é‡çˆ¬å–ï¼Œä½†æˆ‘ä»¬æ— æ³•ä»JOBDIRæŒ‡å®šçš„è·¯å¾„ä¸­çœ‹å‡ºæˆ‘ä»¬ç°åœ¨çˆ¬å–çš„æƒ…å†µã€‚ ä½¿ç”¨scrapy-...">
    <link rel="preload" href="/assets/style-DYsSz7-m.css" as="style"><link rel="stylesheet" href="/assets/style-DYsSz7-m.css">
    <link rel="modulepreload" href="/assets/app-CFFpmDzR.js"><link rel="modulepreload" href="/assets/10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½².html-C24X_WEI.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/1.mysql.html-Buddsr3-.js" as="script"><link rel="prefetch" href="/assets/2.mongodb.html-DEZx2vC8.js" as="script"><link rel="prefetch" href="/assets/1.Python3åŸºç¡€.html-DPIzc19_.js" as="script"><link rel="prefetch" href="/assets/10.ç½‘é¡µè§£ææ¨¡å—äºŒ.html-C0C-P1nJ.js" as="script"><link rel="prefetch" href="/assets/11.request ç½‘ç»œè¯·æ±‚.html-9njdTkTS.js" as="script"><link rel="prefetch" href="/assets/12.selenium.html-DTOwyDIX.js" as="script"><link rel="prefetch" href="/assets/13.æ•°æ®åº“æ“ä½œ.html-DlZ9Dfmb.js" as="script"><link rel="prefetch" href="/assets/14.scrapy æ¡†æ¶.html-BpIqcgXr.js" as="script"><link rel="prefetch" href="/assets/15.é€†å‘åŠ å¯†æ¨¡å—.html-BnRHMlwd.js" as="script"><link rel="prefetch" href="/assets/16.Django æ¡†æ¶.html-DnIHpW88.js" as="script"><link rel="prefetch" href="/assets/17.Python å…¶ä»–.html-eZEuQwPk.js" as="script"><link rel="prefetch" href="/assets/18.openCV åŸºç¡€.html-BOK9sJgk.js" as="script"><link rel="prefetch" href="/assets/2.å¸¸ç”¨åº“(å…± 15 ä¸ª).html-CnvhFv-P.js" as="script"><link rel="prefetch" href="/assets/3.å¸¸ç”¨APIé€ŸæŸ¥.html-9pYashM-.js" as="script"><link rel="prefetch" href="/assets/4.Pythonè¿›é˜¶çŸ¥è¯†.html-B53BfPjq.js" as="script"><link rel="prefetch" href="/assets/5.é¢å‘å¯¹è±¡ç¼–ç¨‹.html-CNuRFLOb.js" as="script"><link rel="prefetch" href="/assets/6.ç½‘ç»œç¼–ç¨‹.html-DvuHp6VK.js" as="script"><link rel="prefetch" href="/assets/7.å¹¶å‘ç¼–ç¨‹.html-CUHMLCvp.js" as="script"><link rel="prefetch" href="/assets/8.çˆ¬è™«æ‰€éœ€ Python åŸºç¡€.html-DgjdyBmU.js" as="script"><link rel="prefetch" href="/assets/9.HTML_CSS åŸºç¡€.html-DQPnRd6D.js" as="script"><link rel="prefetch" href="/assets/1.åˆè¯†çˆ¬è™«.html-v7OVBRQF.js" as="script"><link rel="prefetch" href="/assets/11.Feapderæ¡†æ¶.html-DiyRASal.js" as="script"><link rel="prefetch" href="/assets/2.Requestsæ¨¡å—.html-CXJTHA1d.js" as="script"><link rel="prefetch" href="/assets/3.æ•°æ®æå–.html-B2le0KpY.js" as="script"><link rel="prefetch" href="/assets/4.æ­£åˆ™è¡¨è¾¾å¼çš„è¯¦ç»†æ•™ç¨‹.html-BnWZzpWN.js" as="script"><link rel="prefetch" href="/assets/5.æ•°æ®å­˜å‚¨.html-CFWuXv7K.js" as="script"><link rel="prefetch" href="/assets/6.å¹¶å‘çˆ¬è™«.html-B1920zfM.js" as="script"><link rel="prefetch" href="/assets/7.è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶.html-BRmznzzN.js" as="script"><link rel="prefetch" href="/assets/8.IPä»£ç†æ± çš„æ­å»º.html-Imn8p1OQ.js" as="script"><link rel="prefetch" href="/assets/9.Scrapyæ¡†æ¶ - åŸºç¡€æ“ä½œ.html-DJ4ZJKek.js" as="script"><link rel="prefetch" href="/assets/01-JSåŸºç¡€.html-DcO7MB1p.js" as="script"><link rel="prefetch" href="/assets/02-æµè§ˆå™¨è°ƒè¯•.html-dEPvcdxu.js" as="script"><link rel="prefetch" href="/assets/03-hookè°ƒè¯•.html-DrrpgqA0.js" as="script"><link rel="prefetch" href="/assets/04-JSè°ƒç”¨å’Œæ‰£ä»£ç .html-Bj2DBZ4g.js" as="script"><link rel="prefetch" href="/assets/05-å“ˆå¸Œç®—æ³•.html-BxiryKUH.js" as="script"><link rel="prefetch" href="/assets/06-å¯¹ç§°åŠ å¯†.html-BzQHXRbt.js" as="script"><link rel="prefetch" href="/assets/07-éå¯¹ç§°åŠ å¯†.html-OHfqGA9z.js" as="script"><link rel="prefetch" href="/assets/08-webpackä¸“é¢˜.html-DbTRnxHC.js" as="script"><link rel="prefetch" href="/assets/09-små›½å¯†ç³»åˆ—.html-DtehAVnm.js" as="script"><link rel="prefetch" href="/assets/10-obæ··æ·†ä¸“é¢˜.html-B4b-yXaD.js" as="script"><link rel="prefetch" href="/assets/11-ASTèŠ‚ç‚¹æ ‘ä¸“é¢˜.html-D-s5rc5m.js" as="script"><link rel="prefetch" href="/assets/12-RPCæŠ€æœ¯.html-BWr4G4i1.js" as="script"><link rel="prefetch" href="/assets/13-è¡¥ç¯å¢ƒ-1.html-CVinZTO4.js" as="script"><link rel="prefetch" href="/assets/14-è¡¥ç¯å¢ƒ-2.html-B_X2y3BW.js" as="script"><link rel="prefetch" href="/assets/15-è¡¥ç¯å¢ƒ-3.html-B7PcV3_h.js" as="script"><link rel="prefetch" href="/assets/16-cookieä¸“é¢˜-1.html-IkVwk3el.js" as="script"><link rel="prefetch" href="/assets/17-cookieä¸“é¢˜-2.html-BL9u67Hs.js" as="script"><link rel="prefetch" href="/assets/18-cookieä¸“é¢˜-3.html-DLiVo_Hy.js" as="script"><link rel="prefetch" href="/assets/19-éªŒè¯ç ä¸“é¢˜-1.html-BmG8-X2N.js" as="script"><link rel="prefetch" href="/assets/20.è€ƒè¯•é¢˜ç›®.html-CKyEb9EP.js" as="script"><link rel="prefetch" href="/assets/22.é¡µé¢æ‰“å¼€æŠ“åŒ…å·¥å…·å°±å…³é—­é¡µé¢è°ƒè¯•æ–¹æ³•.html-B72Q3yWf.js" as="script"><link rel="prefetch" href="/assets/404.html-Bj_n76Nh.js" as="script"><link rel="prefetch" href="/assets/index.html-BHx8PPOe.js" as="script"><link rel="prefetch" href="/assets/index.html-ByeAlyOn.js" as="script"><link rel="prefetch" href="/assets/index.html-CZF9jA5l.js" as="script"><link rel="prefetch" href="/assets/index.html-CDYgX5Dv.js" as="script"><link rel="prefetch" href="/assets/index.html-DMrO0kp9.js" as="script"><link rel="prefetch" href="/assets/index.html-yFhmZtM6.js" as="script"><link rel="prefetch" href="/assets/index.html-dPVfRcif.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://theme-hope-assets.vuejs.press/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">å­¦ä¹ ç¬”è®°</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/python/1.python%E5%9F%BA%E7%A1%80/" aria-label="python"><!---->python<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/" aria-label="æ•°æ®åº“"><!---->æ•°æ®åº“<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">1.pythonåŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">2.çˆ¬è™«</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">1.çˆ¬è™«åŸºç¡€</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/1.%E5%88%9D%E8%AF%86%E7%88%AC%E8%99%AB.html" aria-label="1.åˆè¯†çˆ¬è™«"><!---->1.åˆè¯†çˆ¬è™«<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/2.Requests%E6%A8%A1%E5%9D%97.html" aria-label="2.Requestsæ¨¡å—"><!---->2.Requestsæ¨¡å—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/3.%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96.html" aria-label="3.æ•°æ®æå–"><!---->3.æ•°æ®æå–<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/4.%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B.html" aria-label="4.æ­£åˆ™è¡¨è¾¾å¼çš„è¯¦ç»†æ•™ç¨‹"><!---->4.æ­£åˆ™è¡¨è¾¾å¼çš„è¯¦ç»†æ•™ç¨‹<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/5.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8.html" aria-label="5.æ•°æ®å­˜å‚¨"><!---->5.æ•°æ®å­˜å‚¨<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/6.%E5%B9%B6%E5%8F%91%E7%88%AC%E8%99%AB.html" aria-label="6.å¹¶å‘çˆ¬è™«"><!---->6.å¹¶å‘çˆ¬è™«<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6.html" aria-label="7.è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶"><!---->7.è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/8.IP%E4%BB%A3%E7%90%86%E6%B1%A0%E7%9A%84%E6%90%AD%E5%BB%BA.html" aria-label="8.IPä»£ç†æ± çš„æ­å»º"><!---->8.IPä»£ç†æ± çš„æ­å»º<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/9.Scrapy%E6%A1%86%E6%9E%B6%20-%20%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C.html" aria-label="9.Scrapyæ¡†æ¶ - åŸºç¡€æ“ä½œ"><!---->9.Scrapyæ¡†æ¶ - åŸºç¡€æ“ä½œ<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/10.Scrapy%E6%A1%86%E6%9E%B6%20-%20%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E8%99%AB%E4%BB%A5%E5%8F%8A%E7%88%AC%E8%99%AB%E9%83%A8%E7%BD%B2.html" aria-label="10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½²"><!---->10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½²<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/python/2.%E7%88%AC%E8%99%AB/1.%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/11.Feapder%E6%A1%86%E6%9E%B6.html" aria-label="11.Feapderæ¡†æ¶"><!---->11.Feapderæ¡†æ¶<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2.jsé€†å‘</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½²</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mister-hope.com" target="_blank" rel="noopener noreferrer">YL</a></span><span property="author" content="YL"></span></span><!----><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 20 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT20M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-scrapy-rediså®ç°å¢é‡çˆ¬è™«">1.scrapy-rediså®ç°å¢é‡çˆ¬è™«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-scrapy-rediså®ç°åˆ†å¸ƒå¼çˆ¬è™«">2.scrapy-rediså®ç°åˆ†å¸ƒå¼çˆ¬è™«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-é¡¹ç›®éƒ¨ç½²-scrapyd">3.é¡¹ç›®éƒ¨ç½² - scrapyd</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-é¡¹ç›®éƒ¨ç½²-scrapydweb">4.é¡¹ç›®éƒ¨ç½² - scrapydweb</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-é¡¹ç›®éƒ¨ç½²-gerapy">5.é¡¹ç›®éƒ¨ç½² - Gerapy</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h3 id="_1-scrapy-rediså®ç°å¢é‡çˆ¬è™«" tabindex="-1"><a class="header-anchor" href="#_1-scrapy-rediså®ç°å¢é‡çˆ¬è™«"><span>1.<code>scrapy-redis</code>å®ç°å¢é‡çˆ¬è™«</span></a></h3><h5 id="å¢é‡çˆ¬è™«çš„å«ä¹‰" tabindex="-1"><a class="header-anchor" href="#å¢é‡çˆ¬è™«çš„å«ä¹‰"><span>å¢é‡çˆ¬è™«çš„å«ä¹‰</span></a></h5><p>åœ¨å‰é¢æˆ‘ä»¬å­¦ä¹ äº†å¯ä»¥åœ¨è¿è¡Œ<code>scrapy</code>é¡¹ç›®æ—¶ï¼Œä½¿ç”¨<code>scrpay crawl çˆ¬è™«å -s JOBDIR=xxx</code>æ¥å®ç°æš‚åœã€æ¢å¤çˆ¬å–ï¼ˆå…¶å®å°±æ˜¯å¢é‡çˆ¬è™«ï¼Œå†æ¬¡è¿è¡Œæ—¶å¯ä»¥åœ¨ä¹‹å‰åŸºç¡€ä¸Šç»§ç»­çˆ¬ï¼‰ï¼Œè¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿå®ç°å¢é‡çˆ¬å–ï¼Œä½†æˆ‘ä»¬æ— æ³•ä»<code>JOBDIR</code>æŒ‡å®šçš„è·¯å¾„ä¸­çœ‹å‡ºæˆ‘ä»¬ç°åœ¨çˆ¬å–çš„æƒ…å†µã€‚</p><h5 id="ä½¿ç”¨scrapy-rediså®Œæˆå¢é‡çˆ¬è™«" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨scrapy-rediså®Œæˆå¢é‡çˆ¬è™«"><span>ä½¿ç”¨<code>scrapy-redis</code>å®Œæˆå¢é‡çˆ¬è™«</span></a></h5><blockquote><p>å®‰è£…</p></blockquote><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ä½¿ç”¨scrapy-redisä¹‹å‰æœ€å¥½å°†scrapyç‰ˆæœ¬ä¿æŒåœ¨2.8.0, 2.11.0ç‰ˆæœ¬æœ‰å…¼å®¹æ€§é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scrapy==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2.8.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scrapy-redis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://pypi.tuna.tsinghua.edu.cn/simple</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>é…ç½®</p></blockquote><p>æƒ³è¦è®©<code>scrapy</code>å®ç°å¢é‡çˆ¬å–ï¼ˆå³æš‚åœã€æ¢å¤ï¼‰åŠŸèƒ½ï¼Œå°±éœ€è¦åœ¨<code>scrapy</code>é¡¹ç›®ä¸­çš„<code>settings.py</code>æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot; scrapy-redisé…ç½® &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># è°ƒåº¦å™¨ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.scheduler.Scheduler&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æŒ‡çº¹å»é‡ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DUPEFILTER_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å¯ä»¥æ›¿æ¢æˆå¸ƒéš†è¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ä¸‹è½½ - pip install scrapy-redis-bloomfilter</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># from scrapy_redis_bloomfilter.dupefilter import RFPDupeFilter</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># DUPEFILTER_CLASS = &#39;scrapy_redis_bloomfilter.dupefilter.RFPDupeFilter&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æ˜¯å¦åœ¨å…³é—­æ—¶å€™ä¿ç•™åŸæ¥çš„è°ƒåº¦å™¨å’Œå»é‡è®°å½•ï¼ŒTrue=ä¿ç•™ï¼ŒFalse=æ¸…ç©º</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_PERSIST</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># RedisæœåŠ¡å™¨åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">REDIS_URL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;redis://127.0.0.1:6379/0&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # Redisé»˜è®¤æœ‰16åº“ï¼Œ/1çš„æ„æ€æ˜¯ä½¿ç”¨åºå·ä¸º2çš„åº“ï¼Œé»˜è®¤æ˜¯0å·åº“ï¼ˆè¿™ä¸ªå¯ä»¥ä»»æ„ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_QUEUE_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;scrapy_redis.queue.PriorityQueue&#39;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # ä½¿ç”¨æœ‰åºé›†åˆæ¥å­˜å‚¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># SCHEDULER_QUEUE_CLASS = &#39;scrapy_redis.queue.FifoQueue&#39;  # å…ˆè¿›å…ˆå‡º</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># SCHEDULER_QUEUE_CLASS = &#39;scrapy_redis.queue.LifoQueue&#39;  # å…ˆè¿›åå‡ºã€åè¿›å…ˆå‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># é…ç½®redisç®¡é“</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># from scrapy_redis.pipelines import RedisPipeline</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">ITEM_PIPELINES</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;douban.pipelines.DoubanPipeline&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;scrapy_redis.pipelines.RedisPipeline&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">301</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># é‡çˆ¬: ä¸€èˆ¬ä¸é…ç½®ï¼Œåœ¨åˆ†å¸ƒå¼ä¸­ä½¿ç”¨é‡çˆ¬æœºåˆ¶ä¼šå¯¼è‡´æ•°æ®æ··ä¹±ï¼Œé»˜è®¤æ˜¯False</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># SCHEDULER_FLUSH_ON_START = True</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¿è¡ŒæŒ‡ä»¤ä»¥åŠè¿è¡Œæ•ˆæœ</p></blockquote><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> crawl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> çˆ¬è™«åç§°</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åœ¨çˆ¬å–è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨<code>ctrl + c</code>è®©çˆ¬è™«æš‚åœæŠ“å–ã€‚åœæ­¢åä½¿ç”¨<code>redis</code>å®¢æˆ·ç«¯æŸ¥çœ‹å¯¹åº”çš„æ•°æ®ä¿¡æ¯ã€‚</p><ol><li>åœ¨æ•°æ®åº“ä¸­æ˜¾ç¤ºçš„<code>requests</code>è¡¨ç¤ºè¿˜æ²¡æœ‰æ¥å¾—åŠæŠ“å–çš„è¯·æ±‚ï¼Œä¸‹æ¬¡æŠ“å–æ—¶æ ¹æ®å½“å‰æ•°æ®ç»§ç»­è¿è¡Œã€‚</li></ol><figure><img src="/assets/scrapy-redis-requests-DPPP2LBe.png" alt="scrapy-redis-requests" tabindex="0" loading="lazy"><figcaption>scrapy-redis-requests</figcaption></figure><ol start="2"><li>æ•°æ®åº“ä¸­æ˜¾ç¤ºçš„<code>dupfilter</code>è¡¨ç¤ºå·²ç»æŠ“å–è¿‡çš„è¯·æ±‚ï¼Œé‡æ–°å¯åŠ¨åå¦‚æœå­˜åœ¨ç›¸åŒçš„<code>requests</code>åˆ™ä¸å†æŠ“å–ã€‚</li></ol><figure><img src="/assets/scrapy-redis-dupfilter-C8AXghTc.png" alt="scrapy-redis-dupfilter" tabindex="0" loading="lazy"><figcaption>scrapy-redis-dupfilter</figcaption></figure><h5 id="çˆ¬è™«ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#çˆ¬è™«ä½œä¸š"><span>çˆ¬è™«ä½œä¸š</span></a></h5><p>è®¿é—®ç½‘æ˜“æ‹›è˜ç«™ç‚¹è·å–åˆ—å‡ºçš„æ‰€æœ‰æ‹›è˜ä¿¡æ¯ï¼Œç½‘ç«™åœ°å€ï¼šhttps://hr.163.com/job-list.html</p><blockquote><p>ç¤ºä¾‹ä»£ç </p></blockquote><p><code>spiders/zhaopin.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cmdline</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.http </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> JsonRequest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ZhaoPinSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">scrapy</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Spider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;zhaopin&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    allowed_domains </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;hr.163.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # start_urls = [&quot;https://hr.163.com/api/hr163/position/queryPage&quot;]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> start_requests</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        api_url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;https://hr.163.com/api/hr163/position/queryPage&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> page </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> range</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">279</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            params </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;currentPage&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: page,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;pageSize&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            yield</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> JsonRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(api_url, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">params)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        work_list </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;data&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">][</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;list&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> work </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> work_list:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> dict</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;work_id&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> work[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;id&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;postTypeFullName&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> work[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;postTypeFullName&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;reqEducationName&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> work[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;reqEducationName&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;workPlaceNameList&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> work[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;workPlaceNameList&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">][</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;requirement&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> work[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;requirement&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> item</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;__main__&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cmdline.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;scrapy crawl zhaopin&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">split</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>pipelines.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pymongo</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> itemadapter </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ItemAdapter</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> NetEasePipeline</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> open_spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.mongo_client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pymongo.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">MongoClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.collection </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.mongo_client[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;py_spider&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">][</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;netEase_job&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process_item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.collection.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">insert_one</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(item)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¿å­˜æˆåŠŸ:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, item)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> close_spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.mongo_client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>settings.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">BOT_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;netease&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SPIDER_MODULES</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;netease.spiders&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">NEWSPIDER_MODULE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;netease.spiders&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">ROBOTSTXT_OBEY</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DOWNLOAD_DELAY</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">ITEM_PIPELINES</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;netease.pipelines.NetEasePipeline&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">REQUEST_FINGERPRINTER_IMPLEMENTATION</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;2.7&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">TWISTED_REACTOR</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;twisted.internet.asyncioreactor.AsyncioSelectorReactor&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">FEED_EXPORT_ENCODING</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;utf-8&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;scrapy-redisé…ç½®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># è°ƒåº¦å™¨ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.scheduler.Scheduler&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æŒ‡çº¹å»é‡ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DUPEFILTER_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æ˜¯å¦åœ¨å…³é—­æ—¶å€™ä¿ç•™åŸæ¥çš„è°ƒåº¦å™¨å’Œå»é‡è®°å½•ï¼ŒTrue=ä¿ç•™ï¼ŒFalse=æ¸…ç©º</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_PERSIST</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># RedisæœåŠ¡å™¨åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">REDIS_URL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;redis://127.0.0.1:6379/1&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # Redisé»˜è®¤æœ‰16åº“ï¼Œ/1çš„æ„æ€æ˜¯ä½¿ç”¨åºå·ä¸º2çš„åº“ï¼Œé»˜è®¤æ˜¯0å·åº“ï¼ˆè¿™ä¸ªå¯ä»¥ä»»æ„ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-scrapy-rediså®ç°åˆ†å¸ƒå¼çˆ¬è™«" tabindex="-1"><a class="header-anchor" href="#_2-scrapy-rediså®ç°åˆ†å¸ƒå¼çˆ¬è™«"><span>2.<code>scrapy-redis</code>å®ç°åˆ†å¸ƒå¼çˆ¬è™«</span></a></h3><p>åœ¨å‰é¢<code>scrapy</code>æ¡†æ¶çš„å­¦ä¹ ä¸­æˆ‘ä»¬å·²ç»èƒ½å¤Ÿä½¿ç”¨æ¡†æ¶å®ç°çˆ¬è™«çˆ¬å–ç½‘ç«™æ•°æ®,å¦‚æœå½“å‰ç½‘ç«™çš„æ•°æ®æ¯”è¾ƒåºå¤§, æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼æ¥æ›´å¿«çš„çˆ¬å–æ•°æ®ã€‚</p><h5 id="scrapy-redisçš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#scrapy-redisçš„æ¦‚å¿µ"><span><code>scrapy-redis</code>çš„æ¦‚å¿µ</span></a></h5><p>ä¹‹å‰æˆ‘ä»¬å·²ç»å­¦ä¹ äº†<code>scrapy</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„çˆ¬è™«æ¡†æ¶ï¼Œèƒ½å¤Ÿè€—è´¹å¾ˆå°‘çš„æ—¶é—´å°±èƒ½å¤Ÿå†™å‡ºçˆ¬è™«ä»£ç ã€‚<code>scrapy-redis</code>æ˜¯<code>scrapy</code>çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒä½¿ç”¨äº†<code>redis</code>æ•°æ®åº“åšä¸ºåŸºç¡€ï¼Œç›®çš„ä¸ºäº†æ›´æ–¹ä¾¿åœ°è®©<code>scrapy</code>å®ç°åˆ†å¸ƒå¼çˆ¬å–ã€‚</p><p><code>scrapy</code>èƒ½åšçš„äº‹æƒ…å¾ˆå¤šï¼Œä½†æ˜¯è¦åšåˆ°å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼åº”ç”¨åˆ™æ‰è¥Ÿè§è‚˜ã€‚æœ‰èƒ½äººæ”¹å˜äº†<code>scrapy</code>çš„é˜Ÿåˆ—è°ƒåº¦ï¼Œå°†èµ·å§‹çš„ç½‘å€ä»<code>start_urls</code>é‡Œåˆ†ç¦»å‡ºæ¥ï¼Œæ”¹ä¸ºä»<code>redis</code>è¯»å–ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶è¯»å–åŒä¸€ä¸ª<code>redis</code>ï¼Œä»è€Œå®ç°äº†åˆ†å¸ƒå¼çš„çˆ¬è™«ã€‚</p><h5 id="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼"><span>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼</span></a></h5><p>ç®€å•çš„è¯´ åˆ†å¸ƒå¼å°±æ˜¯ä¸åŒçš„èŠ‚ç‚¹ï¼ˆæœåŠ¡å™¨ï¼Œip ä¸åŒï¼‰å…±åŒå®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œä¸”æ•°æ®ä¸ä¼šæ··ä¹±ã€‚</p><p>æ¯”æ–¹è¯´ï¼šæŸå…¬å¸åˆ°å¹´åº•äº†è¦ç»Ÿè®¡è¿™ä¸€å¹´æ¥å…¬å¸æ‰€æœ‰çš„æ”¶å…¥ä¸æ”¯å‡ºæƒ…å†µï¼Œæ‰€ä»¥è¯·äº†ä¸€ä¸ªè´¢åŠ¡äººå‘˜æ¥åšï¼Œæ­¤æ—¶å°±æ˜¯å•ä»»åŠ¡ï¼ˆå› ä¸ºåªæœ‰ 1 ä¸ªäººåšäº‹ï¼‰ã€‚ä¸ºäº†æé«˜æ•ˆç‡å…¬å¸åˆä¸´æ—¶è˜è¯·äº† 9 ä½è´¢åŠ¡äººå‘˜ä¸€èµ·æ¥åšè¿™ä¸ªäº‹æƒ…ï¼Œæ­¤æ—¶å…±æœ‰ 10 äººï¼Œæ­¤æ—¶æˆ‘ä»¬æˆä¸ºå¤šä»»åŠ¡ï¼Œåˆå› ä¸ºæ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¸ªä½“ï¼Œæ‰€ä»¥å°±å«åšåˆ†å¸ƒå¼äº†ã€‚</p><p>åœ¨æ•°æ®ç»Ÿè®¡ä¹‹å‰ï¼Œéœ€è¦åˆ†é…æ¯ä¸ªäººåº”è¯¥åšçš„å·¥ä½œï¼Œå½“æ‰€æœ‰äººå…¨éƒ¨å®Œæˆä»»åŠ¡åå°†ç»“æœæ±‡æ€»åœ¨ä¸€èµ·åˆ™å®Œæˆäº†å…¬å¸ä¸‹è¾¾çš„ä»»åŠ¡ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„äº‹æƒ…å°±æ˜¯ï¼šä»»åŠ¡çš„åˆ†é…ä¸ç»“æœçš„æ”¶é›†ã€‚</p><h5 id="scrapy-redisçš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#scrapy-redisçš„ä½œç”¨"><span><code>scrapy-redis</code>çš„ä½œç”¨</span></a></h5><p><code>scrapy-redis</code>åœ¨<code>scrapy</code>çš„åŸºç¡€ä¸Šå®ç°äº†æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå…·ä½“ä½“ç°åœ¨ï¼š</p><p>é€šè¿‡æŒä¹…åŒ–è¯·æ±‚é˜Ÿåˆ—å’Œè¯·æ±‚çš„æŒ‡çº¹é›†åˆæ¥å®ç°ï¼š</p><ul><li><p>æ–­ç‚¹ç»­çˆ¬</p><p>é€šä¿—çš„è¯´ï¼šè¿™æ¬¡çˆ¬å–çš„æ•°æ®ï¼Œä¸‹è½½å†è¿è¡Œæ—¶ä¸ä¼šçˆ¬å–ï¼Œåªçˆ¬å–ä¹‹å‰æ²¡æœ‰çˆ¬è¿‡çš„æ•°æ®</p></li><li><p>åˆ†å¸ƒå¼å¿«é€ŸæŠ“å–</p><p>é€šä¿—çš„è¯´ï¼šå¤šä¸ªç”µè„‘ï¼ˆä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªç”µè„‘ä¸Šè¿è¡Œå¤šä¸ªç¨‹åºæ¥æ¨¡æ‹Ÿï¼‰å¯ä»¥ä¸€èµ·çˆ¬å–æ•°æ®ï¼Œè€Œä¸”ä¸ä¼šæœ‰å†²çª</p></li></ul><h5 id="scrapy-redisçš„å·¥ä½œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#scrapy-redisçš„å·¥ä½œæµç¨‹"><span><code>scrapy-redis</code>çš„å·¥ä½œæµç¨‹</span></a></h5><ol><li><code>scrapy</code>çš„æµç¨‹ï¼ˆä¸ä¹‹å‰æ‰€è®²çš„<code>scrapy</code>å›¾è§£ä¸€æ ·ï¼Œåªæ˜¯è¡¨ç°å½¢å¼ä¸ä¸€æ ·ï¼‰</li></ol><figure><img src="/assets/scrapy%E6%A1%86%E6%9E%B6%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%9B%BE%E8%A7%A3-2-EOdMkD0p.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="2"><li><code>scrapy-redis</code>å®ç°åˆ†å¸ƒå¼å›¾è§£</li></ol><figure><img src="/assets/scrapy-redis%E5%88%86%E5%B8%83%E5%BC%8F%E5%9B%BE%E8%A7%A3-DveT1uuw.png" alt="scrapy-redisåˆ†å¸ƒå¼å›¾è§£" tabindex="0" loading="lazy"><figcaption>scrapy-redisåˆ†å¸ƒå¼å›¾è§£</figcaption></figure><p>è¯´æ˜ï¼šåŸæœ¬åªæœ‰ 1 ä¸ª<code>scrapy</code>æ—¶ï¼Œå®ƒæ‰€æœ‰çš„è¯·æ±‚å¯¹è±¡<code>request</code>éƒ½ç›´æ¥å­˜æ”¾åˆ°äº†å†…å­˜ä¸­ï¼Œæ­¤æ—¶å¯ä»¥å®Œæˆæœ¬å°ç”µè„‘ä¸Š<code>scrapy</code>çš„åŠŸèƒ½ï¼Œä½†æ˜¯å…¶ä»–ç”µè„‘ä¸Šçš„<code>scrapy</code>æ˜¯ä¸èƒ½å¤Ÿè·å–å¦å¤–ä¸€å°ç”µè„‘å†…å­˜ä¸­çš„æ•°æ®çš„ï¼Œæ‰€ä»¥å€ŸåŠ©äº†<code>Redis</code>æ•°æ®åº“ã€‚å°†åŸæœ¬ç›´æ¥å­˜å‚¨åˆ°å†…å­˜ä¸­çš„æ•°æ®ï¼ˆåƒè¯·æ±‚å¯¹è±¡ç­‰ï¼‰æ”¾åˆ°äº†<code>Redis</code>æ•°æ®åº“ä¸­ï¼ˆå› ä¸º<code>Redis</code>æ•ˆç‡éå¸¸é«˜ï¼Œæ‰€ä»¥ç”¨å®ƒè€Œä¸ç”¨<code>MySQL</code>ã€<code>MongoDB</code>ï¼‰ï¼Œåˆå› ä¸º<code>Redis</code>æ˜¯æ”¯æŒç½‘ç»œè®¿é—®çš„ï¼Œæ‰€ä»¥åœ¨æœ¬ç”µè„‘ä¸Šçš„<code>Redis</code>ä¸­å­˜å‚¨çš„æ•°æ®ï¼Œå°±å¯ä»¥è®©å…¶ä»–ç”µè„‘ä¸Šçš„<code>scrapy</code>å»å…±ç”¨ï¼Œæ­¤æ—¶å“ªä¸ªè¯·æ±‚å¯¹è±¡å·²ç»å¤„ç†è¿‡ï¼Œå“ªä¸ªæ²¡æœ‰å¹¶å¤„ç†è¿‡ï¼Œä¸€ç›®äº†ç„¶ã€‚</p><h5 id="æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„ç‚¹"><span>æ³¨æ„ç‚¹</span></a></h5><ol><li>åœ¨<code>scrapy-redis</code>ä¸­ï¼Œæ‰€æœ‰çš„å¾…æŠ“å–çš„<code>request</code>å¯¹è±¡å’Œå»é‡çš„<code>request</code>å¯¹è±¡æŒ‡çº¹éƒ½å­˜åœ¨å…±ç”¨çš„<code>redis</code>ä¸­</li><li>æ‰€æœ‰çš„æœåŠ¡å™¨ä¸­çš„<code>scrapy</code>è¿›ç¨‹å…±ç”¨åŒä¸€ä¸ª<code>redis</code>ä¸­çš„<code>request</code>å¯¹è±¡çš„é˜Ÿåˆ—</li><li>æ‰€æœ‰çš„<code>request</code>å¯¹è±¡å­˜å…¥<code>redis</code>å‰ï¼Œéƒ½ä¼šé€šè¿‡è¯¥<code>redis</code>ä¸­çš„<code>request</code>æŒ‡çº¹é›†åˆè¿›è¡Œåˆ¤æ–­ï¼Œä¹‹å‰æ˜¯å¦å·²ç»å­˜å…¥è¿‡</li><li>åœ¨é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„æ•°æ®ä¼šä¿å­˜åœ¨<code>redis</code>ä¸­</li></ol><figure><img src="/assets/scrapy-redis%E5%88%86%E5%B8%83%E5%BC%8F%E5%9B%BE%E8%A7%A3-2-BreXQGE1.png" alt="scrapy-redisåˆ†å¸ƒå¼å›¾è§£-2" tabindex="0" loading="lazy"><figcaption>scrapy-redisåˆ†å¸ƒå¼å›¾è§£-2</figcaption></figure><h5 id="scrapy-redisåˆ†å¸ƒå¼æ¶æ„çš„æ€è·¯åˆ†æ" tabindex="-1"><a class="header-anchor" href="#scrapy-redisåˆ†å¸ƒå¼æ¶æ„çš„æ€è·¯åˆ†æ"><span><code>scrapy-redis</code>åˆ†å¸ƒå¼æ¶æ„çš„æ€è·¯åˆ†æ</span></a></h5><p>å‡è®¾æœ‰å››å°ç”µè„‘ï¼š<code>Windows 10</code>ã€<code>Mac OS X</code>ã€<code>Ubuntu 16.04</code>ã€<code>CentOS 7.2</code>ä»»æ„ä¸€å°ç”µè„‘éƒ½å¯ä»¥ä½œä¸º<code>Master</code>ç«¯æˆ–<code>Slaver</code>ç«¯ã€‚</p><figure><img src="/assets/scrapy-redis%E5%88%86%E5%B8%83%E5%BC%8F%E5%9B%BE%E8%A7%A3-3-CQ9QlWH6.png" alt="scrapy-redisåˆ†å¸ƒå¼å›¾è§£-3" tabindex="0" loading="lazy"><figcaption>scrapy-redisåˆ†å¸ƒå¼å›¾è§£-3</figcaption></figure><ul><li><code>Masterç«¯</code>(æ ¸å¿ƒæœåŠ¡å™¨) ï¼šä½¿ç”¨<code>Windows 10</code>ï¼Œæ­å»ºä¸€ä¸ª<code>Redis</code>æ•°æ®åº“ï¼Œä¸è´Ÿè´£çˆ¬å–ï¼Œåªè´Ÿè´£<code>url</code>æŒ‡çº¹åˆ¤é‡ã€<code>Request</code>çš„åˆ†é…ï¼Œä»¥åŠæ•°æ®çš„å­˜å‚¨</li><li><code>Slaverç«¯</code>(çˆ¬è™«ç¨‹åºæ‰§è¡Œç«¯) ï¼šä½¿ç”¨<code>Mac OS X</code>ã€<code>Ubuntu 16.04</code>ã€<code>CentOS 7.2</code>è´Ÿè´£æ‰§è¡Œçˆ¬è™«ç¨‹åºï¼Œè¿è¡Œè¿‡ç¨‹ä¸­æäº¤æ–°çš„<code>Request</code>ç»™<code>Master</code></li></ul><blockquote><p>æ‰§è¡Œæµç¨‹</p></blockquote><ol><li>é¦–å…ˆ<code>Slaver</code>ç«¯ä»<code>Master</code>ç«¯æ‹¿ä»»åŠ¡ï¼ˆ<code>Request</code>ã€<code>url</code>ï¼‰è¿›è¡Œæ•°æ®æŠ“å–ï¼Œ<code>Slaver</code>æŠ“å–æ•°æ®çš„åŒæ—¶ï¼Œäº§ç”Ÿæ–°ä»»åŠ¡çš„<code>Request</code>ä¾¿æäº¤ç»™<code>Master</code>å¤„ç†ï¼›</li><li><code>Master</code>ç«¯åªæœ‰ä¸€ä¸ª<code>Redis</code>æ•°æ®åº“ï¼Œè´Ÿè´£å°†æœªå¤„ç†çš„<code>Request</code>å»é‡å’Œä»»åŠ¡åˆ†é…ï¼Œå°†å¤„ç†åçš„<code>Request</code>åŠ å…¥å¾…çˆ¬é˜Ÿåˆ—ï¼Œå¹¶ä¸”å­˜å‚¨çˆ¬å–çš„æ•°æ®ã€‚</li></ol><p><code>scrapy-redis</code>é»˜è®¤ä½¿ç”¨çš„å°±æ˜¯è¿™ç§ç­–ç•¥ï¼Œæˆ‘ä»¬å®ç°èµ·æ¥å¾ˆç®€å•ï¼Œå› ä¸ºä»»åŠ¡è°ƒåº¦ç­‰å·¥ä½œ<code>scrapy-redis</code>éƒ½å·²ç»å¸®æˆ‘ä»¬åšå¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç»§æ‰¿<code>RedisSpider</code>ã€æŒ‡å®š<code>redis_key</code>å°±è¡Œäº†ã€‚</p><p>ç¼ºç‚¹ï¼š<code>scrapy-redis</code>è°ƒåº¦çš„ä»»åŠ¡æ˜¯<code>Request</code>å¯¹è±¡ï¼Œé‡Œé¢ä¿¡æ¯é‡æ¯”è¾ƒå¤§ï¼ˆä¸ä»…åŒ…å«<code>url</code>ï¼Œè¿˜æœ‰<code>callback</code>å‡½æ•°ã€<code>headers</code>ç­‰ä¿¡æ¯ï¼‰ï¼Œå¯èƒ½å¯¼è‡´çš„ç»“æœå°±æ˜¯ä¼šé™ä½çˆ¬è™«é€Ÿåº¦ã€è€Œä¸”ä¼šå ç”¨<code>Redis</code>å¤§é‡çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥å¦‚æœè¦ä¿è¯æ•ˆç‡ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å®šç¡¬ä»¶æ°´å¹³ã€‚</p><h5 id="è±†ç“£çˆ¬è™«æ¡ˆä¾‹å®ç°" tabindex="-1"><a class="header-anchor" href="#è±†ç“£çˆ¬è™«æ¡ˆä¾‹å®ç°"><span>è±†ç“£çˆ¬è™«æ¡ˆä¾‹å®ç°</span></a></h5><p><code>top250.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> base64</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cmdline</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy_redis.spiders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> RedisSpider</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.http </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> HtmlResponse</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Top250Spider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RedisSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;top250&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    allowed_domains </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;movie.douban.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;doubanio.com&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # start_urls = [&quot;https://movie.douban.com/top250&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    redis_key </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;top250:start_urls&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#ABB2BF;"> HtmlResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        li_list </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;//ol[@class=&#39;grid_view&#39;]/li&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li_temp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li_list:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            image_url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li_temp.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.//img/@src&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            title </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li_temp.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.//span[@class=&#39;title&#39;][1]/text()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            rating_num </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li_temp.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.//span[@class=&#39;rating_num&#39;]/text()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            people_num </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li_temp.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.//div[@class=&#39;star&#39;]/span[4]/text()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;type&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;info&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;image_url&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: image_url,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: title,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;rating_num&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: rating_num,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;people_num&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: people_num</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">image_url, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.parse_image, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">cb_kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;image_name&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: title})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;//span[@class=&#39;next&#39;]/a/@href&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            next_url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">urljoin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;//span[@class=&#39;next&#39;]/a/@href&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">            print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å¼€å§‹æŠ“å–ä¸‹ä¸€é¡µ:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, next_url)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">next_url, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.parse)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">            print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;å…¨ç«™æŠ“å–æˆåŠŸ...&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parse_image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> image_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        base64_data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> base64.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">b64encode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(response.body)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        str_data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> base64_data.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">decode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;type&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;image&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;image_name&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: image_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;.jpg&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;image_content&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: str_data</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># if __name__ == &#39;__main__&#39;:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#     cmdline.execute(&#39;scrapy crawl top250&#39;.split())</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>settings.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">BOT_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;douban&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SPIDER_MODULES</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;douban.spiders&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">NEWSPIDER_MODULE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;douban.spiders&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">ROBOTSTXT_OBEY</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æ§åˆ¶æŠ“å–é€Ÿç‡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DOWNLOAD_DELAY</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DOWNLOADER_MIDDLEWARES</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # &quot;douban.middlewares.DoubanDownloaderMiddleware&quot;: 543,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;douban.middlewares.UserAgentDownloaderMiddleware&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">543</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">REQUEST_FINGERPRINTER_IMPLEMENTATION</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;2.7&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">TWISTED_REACTOR</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;twisted.internet.asyncioreactor.AsyncioSelectorReactor&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">FEED_EXPORT_ENCODING</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;utf-8&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot; scrapy-redisé…ç½® &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># è°ƒåº¦å™¨ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.scheduler.Scheduler&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æŒ‡çº¹å»é‡ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DUPEFILTER_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å¯ä»¥æ›¿æ¢æˆå¸ƒéš†è¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ä¸‹è½½ - pip install scrapy-redis-bloomfilter</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># from scrapy_redis_bloomfilter.dupefilter import RFPDupeFilter</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># DUPEFILTER_CLASS = &#39;scrapy_redis_bloomfilter.dupefilter.RFPDupeFilter&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æ˜¯å¦åœ¨å…³é—­æ—¶å€™ä¿ç•™åŸæ¥çš„è°ƒåº¦å™¨å’Œå»é‡è®°å½•ï¼ŒTrue=ä¿ç•™ï¼ŒFalse=æ¸…ç©º</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_PERSIST</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># RedisæœåŠ¡å™¨åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">REDIS_URL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;redis://127.0.0.1:6379/0&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # Redisé»˜è®¤æœ‰16åº“ï¼Œ/1çš„æ„æ€æ˜¯ä½¿ç”¨åºå·ä¸º2çš„åº“ï¼Œé»˜è®¤æ˜¯0å·åº“ï¼ˆè¿™ä¸ªå¯ä»¥ä»»æ„ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_QUEUE_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;scrapy_redis.queue.PriorityQueue&#39;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # ä½¿ç”¨æœ‰åºé›†åˆæ¥å­˜å‚¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># SCHEDULER_QUEUE_CLASS = &#39;scrapy_redis.queue.FifoQueue&#39;  # å…ˆè¿›å…ˆå‡º</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># SCHEDULER_QUEUE_CLASS = &#39;scrapy_redis.queue.LifoQueue&#39;  # å…ˆè¿›åå‡ºã€åè¿›å…ˆå‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># é…ç½®redisç®¡é“</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># from scrapy_redis.pipelines import RedisPipeline</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">ITEM_PIPELINES</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # &quot;douban.pipelines.DoubanPipeline&quot;: 300,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;scrapy_redis.pipelines.RedisPipeline&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">301</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># é‡çˆ¬: ä¸€èˆ¬ä¸é…ç½®ï¼Œåœ¨åˆ†å¸ƒå¼ä¸­ä½¿ç”¨é‡çˆ¬æœºåˆ¶ä¼šå¯¼è‡´æ•°æ®æ··ä¹±</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># SCHEDULER_FLUSH_ON_START = True</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>middlewares.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># è‡ªå®šä¹‰ä¸‹è½½ä¸­é—´ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserAgentDownloaderMiddleware</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">    USER_AGENTS_LIST</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process_request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        å¦‚æœè¿”å›None, è¡¨ç¤ºå½“å‰çš„requestæäº¤ç»™ä¸‹è½½å™¨æˆ–è€…å…¶ä»–çš„ä¸­é—´ä»¶</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        å¦‚æœè¿”å›çš„æ˜¯requestå¯¹è±¡, åˆ™è¡¨ç¤ºå°†å½“å‰å¯¹è±¡æäº¤ç»™è°ƒåº¦å™¨è¿›è¡Œé‡æ–°è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ä¸‹è½½ä¸­é—´ä»¶ ---&gt; process_request&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # print(&#39;è¯·æ±‚å¯¹è±¡:&#39;, request)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        user_agent </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> random.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">choice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">USER_AGENTS_LIST</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        request.headers[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;User-Agent&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_agent</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> None</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>insert_start_url.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">redis_client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">redis_client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">lpush</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;top250:start_urls&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;https://movie.douban.com/top250?start=0&amp;filter=&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ’å…¥å®Œæˆ...&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">redis_client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å½“å½“ç½‘çˆ¬è™«å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#å½“å½“ç½‘çˆ¬è™«å®æˆ˜"><span>å½“å½“ç½‘çˆ¬è™«å®æˆ˜</span></a></h5><blockquote><p>ç«™ç‚¹åœ°å€ï¼šhttp://search.dangdang.com/?key=Python&amp;act=input</p></blockquote><ol><li>é¡¹ç›®åˆå§‹åŒ–</li></ol><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startproject</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dangdang_book</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>åˆ›å»ºçˆ¬è™«æ–‡ä»¶</li></ol><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dangdang_book</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> genspider</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> book</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://search.dangdang.com/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ä¿®æ”¹çˆ¶ç±»ä»¥åŠé…ç½®<code>redis_key</code></li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy_redis.spiders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> RedisSpider</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BookSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RedisSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;book&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    allowed_domains </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;search.dangdang.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # start_urls = [&quot;http://search.dangdang.com/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    redis_key </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;dd_book:start_url&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        pass</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æŒä¹…åŒ–é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_PERSIST</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ä½¿ç”¨scrapy-redisè°ƒåº¦å™¨</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.scheduler.Scheduler&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># scrapy-redisæŒ‡çº¹è¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DUPEFILTER_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># redisé“¾æ¥åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">REDIS_URL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;redis://127.0.0.1:6379/0&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ä»»åŠ¡çš„ä¼˜å…ˆçº§åˆ«</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_QUEUE_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;scrapy_redis.queue.PriorityQueue&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å­˜æ”¾çš„ç®¡é“</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">ITEM_PIPELINES</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;scrapy_redis.pipelines.RedisPipeline&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;dangdang_book.pipelines.MySQLPipeline&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">301</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DEFAULT_REQUEST_HEADERS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;Accept&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;Accept-Language&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;en&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;User-Agent&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>ç®¡é“é…ç½®</li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># Define your item pipelines here</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># Don&#39;t forget to add your pipeline to the ITEM_PIPELINES setting</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># useful for handling different item types with a single interface</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> itemadapter </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ItemAdapter</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pymysql</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MySQLPipeline</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> open_spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # åˆ¤æ–­æ˜¯å“ªä¸ªçˆ¬è™«, åå­—ä¸åŒæ‰§è¡Œçš„çˆ¬è™«é¡¹ç›®ä¹Ÿä¸åŒ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> spider.name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;book&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.db </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pymysql.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">host</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;localhost&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;root&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">password</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;root&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">db</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;py_spider&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.cursor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.db.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">cursor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            # åˆ›å»ºè¡¨è¯­æ³•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            sql </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            CREATE TABLE IF NOT EXISTS book_info(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                id int primary key auto_increment not null,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                title VARCHAR(255) NOT NULL,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                price VARCHAR(255) NOT NULL,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                author VARCHAR(255) NOT NULL,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                date_data VARCHAR(255) NOT NULL,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                detail TEXT,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                producer VARCHAR(255) NOT NULL)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.cursor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">                print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¡¨åˆ›å»ºæˆåŠŸ...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            except</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;"> Exception</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> e:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">                print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¡¨åˆ›å»ºå¤±è´¥:&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process_item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> item</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> spider.name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;book&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            # SQL æ’å…¥è¯­å¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            sql </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;&quot;INSERT INTO book_info(id, title, price, author, date_data, detail, producer)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            values (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            # æ‰§è¡Œ SQL è¯­å¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.cursor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql, (</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                    0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;price&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;author&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;date_data&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;detail&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;producer&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]))</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                # æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.db.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">commit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">                print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ•°æ®æ’å…¥æˆåŠŸ:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, (</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                    0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;price&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;author&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;date_data&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;detail&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;producer&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]))</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            except</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;"> Exception</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> e:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">                print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;æ•°æ®æ’å…¥å¤±è´¥: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                # å¦‚æœå‘ç”Ÿé”™è¯¯å°±å›æ»š</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.db.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">rollback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> item  </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å°†æ•°æ®æäº¤ç»™redisç®¡é“</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> close_spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> spider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # å…³é—­æ•°æ®åº“è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> spider.name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;book&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.db.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li><code>items.py</code>é…ç½®</li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># Define here the models for your scraped items</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># See documentation in:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># https://docs.scrapy.org/en/latest/topics/items.html</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DangDangBookItem</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">scrapy</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Item</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    title </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    price </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    author </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    date_data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    detail </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    producer </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>å®Œå–„<code>parse</code>å‡½æ•°è§£æé€»è¾‘</li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cmdline</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ä½¿ç”¨ä¸Šä¸€çº§è·¯å¾„å¯¼å…¥Itemæ–‡ä»¶, å¦‚æœä½¿ç”¨å½“å‰å¯¼å…¥æ–¹å¼è¯·ä½¿ç”¨å‘½ä»¤å¯åŠ¨é¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ..items </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> DangDangBookItem</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy_redis.spiders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> RedisSpider</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BookSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RedisSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;book&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    allowed_domains </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;search.dangdang.com&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # start_urls = [&quot;http://search.dangdang.com/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    redis_key </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;dd_book:start_url&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        li_list </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;//ul[@class=&quot;bigimg&quot;]/li&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li_list:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> DangDangBookItem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;./a/@title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;price&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;./p[@class=&quot;price&quot;]/span[1]/text()&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;author&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;./p[@class=&quot;search_book_author&quot;]/span[1]/a[1]/@title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;date_data&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;./p[@class=&quot;search_book_author&quot;]/span[last()-1]/text()&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;detail&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;./p[@class=&quot;detail&quot;]/text()&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;./p[@class=&quot;detail&quot;]/text()&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç©º&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            item[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;producer&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;./p[@class=&quot;search_book_author&quot;]/span[last()]/a/text()&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> li.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                &#39;./p[@class=&quot;search_book_author&quot;]/span[last()]/a/text()&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ç©º&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> item</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;//ul[@name=&quot;Fy&quot;]/li[@class=&quot;next&quot;]/a/@href&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> not</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> None</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            next_url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">urljoin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">xpath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;//ul[@name=&quot;Fy&quot;]/li[@class=&quot;next&quot;]/a/@href&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">extract_first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">next_url, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.parse)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># if __name__ == &#39;__main__&#39;:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#     cmdline.execute(&#39;scrapy crawl book&#39;.split())</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="9"><li><code>redis</code>å­˜å‚¨<code>start_url</code>è¿è¡Œè„šæœ¬</li></ol><p><code>insert_start_url.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">res.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">lpush</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;dd_book:start_url&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://search.dangdang.com/?key=python&amp;act=input&amp;page_index=1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">res.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="10"><li>ä»<code>redis</code>ä¸­è·å–æ•°æ®</li></ol><p><code>get_redis_info.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> json</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">redis_client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> temp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis_client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">lrange</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;book:items&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(json.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">loads</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(temp))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">redis_client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ä½¿ç”¨scrapy-rediså‘é€postè¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨scrapy-rediså‘é€postè¯·æ±‚"><span>ä½¿ç”¨<code>scrapy-redis</code>å‘é€<code>POST</code>è¯·æ±‚</span></a></h5><p>åœ¨å½“å‰æ¡ˆä¾‹ä¸­æˆ‘ä»¬éœ€è¦æŒæ¡å¦‚ä½•ä½¿ç”¨<code>scrapy-redis</code>å‘é€<code>POST</code>è¯·æ±‚å¹¶å®Œæˆç¿»é¡µã€‚</p><p>ç«™ç‚¹è¯·æ±‚åœ°å€ï¼šhttp://www.cninfo.com.cn/new/commonUrl?url=disclosure/list/notice#szse</p><p><code>jc.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> json</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cmdline</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy.http </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> FormRequest</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scrapy_redis.spiders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> RedisSpider</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JcSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">RedisSpider</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;jc&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    allowed_domains </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;www.cninfo.com.cn&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # start_urls = [&quot;http://www.cninfo.com.cn/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    redis_key </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;jc:start_urls&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> make_request_from_data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        url </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;http://www.cninfo.com.cn/new/disclosure&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        :param data: æ˜¯scrapy-redisè¯»å–redisä¸­çš„[url, form_data, meta]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        :return:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> json.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">loads</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        form_data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> data.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;form_data&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(form_data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        headers </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;User-Agent&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> FormRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">url, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">headers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">headers, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">formdata</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">form_data, </span><span style="--shiki-light:#986801;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">callback</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.parse)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> **</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">kwargs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;è¿”å›ä¿¡æ¯:&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, response.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;__main__&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cmdline.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;scrapy crawl jc&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">split</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>push_start_url_data.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> json</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> push_start_url_data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">db</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> request_obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    :param db: redisé“¾æ¥å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    :param request_obj: {&#39;url&#39;:url, &#39;form_data&#39;:form_data, &#39;meta&#39;:meta}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    :return:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    db.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">lpush</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;jc:start_urls&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, request_obj)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> __name__</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;__main__&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    redis_client </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> redis.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # éœ€è¦å°†è¡¨å•ä¸­çš„æ•°å­—ç±»å‹å¼ºè½¬ä¸ºå­—ç¬¦ä¸²ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> page </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> range</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">26</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        form_data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;column&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;szse_latest&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;pageNum&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(page),</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;pageSize&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;30&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;sortName&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;sortType&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;clusterFlag&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;true&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        request_data </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;form_data&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: form_data</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        push_start_url_data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(redis_client, json.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">dumps</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(request_data))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    redis_client.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>settings.py</code></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;scrapy-redisé…ç½®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># è°ƒåº¦å™¨ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.scheduler.Scheduler&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æŒ‡çº¹å»é‡ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">DUPEFILTER_CLASS</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æ˜¯å¦åœ¨å…³é—­æ—¶å€™ä¿ç•™åŸæ¥çš„è°ƒåº¦å™¨å’Œå»é‡è®°å½•ï¼ŒTrue=ä¿ç•™ï¼ŒFalse=æ¸…ç©º</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">SCHEDULER_PERSIST</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># RedisæœåŠ¡å™¨åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">REDIS_URL</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;redis://127.0.0.1:6379/0&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-é¡¹ç›®éƒ¨ç½²-scrapyd" tabindex="-1"><a class="header-anchor" href="#_3-é¡¹ç›®éƒ¨ç½²-scrapyd"><span>3.é¡¹ç›®éƒ¨ç½² - <code>scrapyd</code></span></a></h3><h5 id="scrapydçš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#scrapydçš„æ¦‚å¿µ"><span><code>scrapyd</code>çš„æ¦‚å¿µ</span></a></h5><p><code>scarpy</code>æ˜¯ä¸€ä¸ªçˆ¬è™«æ¡†æ¶ï¼Œè€Œ<code>scrapyd</code>ç›¸å½“äºä¸€ä¸ªç»„ä»¶ï¼Œèƒ½å¤Ÿå°†<code>scrapy</code>é¡¹ç›®è¿›è¡Œè¿œç¨‹éƒ¨ç½²ï¼Œè°ƒåº¦ä½¿ç”¨ç­‰ã€‚</p><h5 id="æœåŠ¡ç«¯ç›¸å…³é…ç½®-æ‰§è¡Œçˆ¬è™«çš„æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯ç›¸å…³é…ç½®-æ‰§è¡Œçˆ¬è™«çš„æœåŠ¡å™¨"><span>æœåŠ¡ç«¯ç›¸å…³é…ç½® - æ‰§è¡Œçˆ¬è™«çš„æœåŠ¡å™¨</span></a></h5><blockquote><p>å®‰è£…<code>scrapyd</code></p></blockquote><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pip install scrapyd  </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">i https:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pypi.tuna.tsinghua.edu.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">simple</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>è¿è¡Œ<code>scrapyd</code></p></blockquote><p>åœ¨æœåŠ¡ç«¯æ‰§è¡Œ<code>scrapyd</code>æŒ‡ä»¤<img src="/assets/scrapyd%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4-C7fXIbxS.png" alt="scrapydæ‰§è¡ŒæŒ‡ä»¤" loading="lazy"></p><blockquote><p>ä¿®æ”¹é…ç½®è®©<code>scrapyd</code>æ”¯æŒè¿œç¨‹è®¿é—®</p></blockquote><p>ä½¿ç”¨<code>ctrl+c</code>åœæ­¢ä¸Šä¸€æ­¥è¿è¡Œçš„<code>scrapyd</code>ï¼Œå¹¶åœ¨ä½ æƒ³è¦è¿è¡Œçˆ¬è™«é¡¹ç›®çš„è·¯å¾„ä¹‹ä¸‹æ–°å»º<code>scrapyd.conf</code>æ–‡ä»¶ã€‚</p><figure><img src="/assets/scrapyd%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE-DP7V1Vd2.png" alt="scrapydé…ç½®è¿œç¨‹è®¿é—®" tabindex="0" loading="lazy"><figcaption>scrapydé…ç½®è¿œç¨‹è®¿é—®</figcaption></figure><figure><img src="/assets/scrapyd%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9-1srsIoFl.png" alt="scrapydé…ç½®æ–‡ä»¶å†…å®¹" tabindex="0" loading="lazy"><figcaption>scrapydé…ç½®æ–‡ä»¶å†…å®¹</figcaption></figure><p>è¾“å…¥çš„å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[scrapyd]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ç›‘å¬çš„IPåœ°å€ï¼Œé»˜è®¤ä¸º127.0.0.1ï¼ˆåªæœ‰æ”¹æˆ0.0.0.0æ‰èƒ½åœ¨åˆ«çš„ç”µè„‘ä¸Šèƒ½å¤Ÿè®¿é—®scrapydè¿è¡Œä¹‹åçš„æœåŠ¡å™¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bind_address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ä¸º6800</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">http_port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6800</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æ˜¯å¦æ‰“å¼€debugæ¨¡å¼ï¼Œé»˜è®¤ä¸ºoff</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">debug</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> off</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>é‡æ–°è¿è¡Œ</p></blockquote><p>åœ¨åˆšåˆšæ–°å»º<code>scrpayd.conf</code>æ–‡ä»¶æ‰€åœ¨è·¯å¾„ä¸‹é€šè¿‡ç»ˆç«¯è¿è¡Œ<code>scrapyd</code>ã€‚</p><figure><img src="/assets/%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E9%85%8D%E7%BD%AE%E5%90%8E%E7%9A%84scrapyd%E7%9A%84%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C-MHOocVPC.png" alt="å¼€å¯è¿œç¨‹é…ç½®åçš„scrapydçš„è¿è¡Œæ•ˆæœ" tabindex="0" loading="lazy"><figcaption>å¼€å¯è¿œç¨‹é…ç½®åçš„scrapydçš„è¿è¡Œæ•ˆæœ</figcaption></figure><blockquote><p>åœ¨ç‰©ç†æœºä¸­ä½¿ç”¨æµè§ˆå™¨è®¿é—®è¿è¡Œ<code>scrapyd</code>æŒ‡ä»¤çš„æœåŠ¡å™¨åœ°å€ä»¥åŠç«¯å£</p></blockquote><figure><img src="/assets/%E7%89%A9%E7%90%86%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%95%88%E6%9E%9C-DBl-b_ef.png" alt="ç‰©ç†æœºè®¿é—®æ•ˆæœ" tabindex="0" loading="lazy"><figcaption>ç‰©ç†æœºè®¿é—®æ•ˆæœ</figcaption></figure><h5 id="å®¢æˆ·ç«¯ç›¸å…³é…ç½®-æœ¬åœ°ç¼–å†™çš„çˆ¬è™«ä»£ç ä¸Šä¼ åˆ°æœåŠ¡ç«¯" tabindex="-1"><a class="header-anchor" href="#å®¢æˆ·ç«¯ç›¸å…³é…ç½®-æœ¬åœ°ç¼–å†™çš„çˆ¬è™«ä»£ç ä¸Šä¼ åˆ°æœåŠ¡ç«¯"><span>å®¢æˆ·ç«¯ç›¸å…³é…ç½® - æœ¬åœ°ç¼–å†™çš„çˆ¬è™«ä»£ç ä¸Šä¼ åˆ°æœåŠ¡ç«¯</span></a></h5><blockquote><p>å®‰è£…<code>scrapyd-client</code></p></blockquote><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pip install scrapyd</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">client  </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">i https:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pypi.tuna.tsinghua.edu.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">simple</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>é…ç½®<code>scrapy</code>é¡¹ç›®</p></blockquote><figure><img src="/assets/scrapyd-client%E5%85%B7%E4%BD%93%E9%85%8D%E7%BD%AE-DkLuNkFC.png" alt="scrapyd-clientå…·ä½“é…ç½®" tabindex="0" loading="lazy"><figcaption>scrapyd-clientå…·ä½“é…ç½®</figcaption></figure><p>å¦‚æœè¿è¡Œçš„<code>scrapy</code>çš„æœåŠ¡å™¨åªæœ‰ä¸€ä¸ªåˆ™é…ç½®ä¸€ä¸ª<code>deploy</code>å³å¯ï¼Œå¦‚æœæœ‰å¤šå°æœåŠ¡å™¨åˆ™é…ç½®å¤šä¸ª<code>deploy</code>ã€‚</p><blockquote><p>æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</p></blockquote><p>åœ¨<code>scrapy</code>é¡¹ç›®æ ¹è·¯å¾„ä¹‹ä¸‹è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æ³¨æ„æ˜¯å°å†™çš„Lï¼Œä¸æ˜¯æ•°å­—1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapyd-deploy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/assets/%E8%BF%90%E8%A1%8Cscreapyd-deploy%E7%9A%84%E6%95%88%E6%9E%9C-UrSo4Mky.png" alt="è¿è¡Œscreapyd-deployçš„æ•ˆæœ" tabindex="0" loading="lazy"><figcaption>è¿è¡Œscreapyd-deployçš„æ•ˆæœ</figcaption></figure><blockquote><p>å‘å¸ƒ<code>scrapy</code>é¡¹ç›®åˆ°<code>scrapyd</code>æ‰€åœ¨çš„æœåŠ¡å™¨ï¼ˆå½“å‰çˆ¬è™«æ˜¯æœªè¿è¡ŒçŠ¶æ€ï¼‰</p></blockquote><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapyd-deploy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">targe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">projec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">--version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">versio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">n&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>target</code>ï¼šå°±æ˜¯å‰é¢é…ç½®æ–‡ä»¶é‡Œ<code>deploy</code>åé¢çš„çš„<code>target</code>åå­—ï¼Œä¾‹å¦‚<code>ubuntu-1</code></li><li><code>project</code>ï¼šå¯ä»¥éšæ„å®šä¹‰ï¼Œè·Ÿçˆ¬è™«çš„å·¥ç¨‹åå­—æ— å…³ï¼Œä¸€èˆ¬å»ºè®®ä¸<code>scrapy</code>çˆ¬è™«é¡¹ç›®åç›¸åŒ</li><li><code>version</code>ï¼šè‡ªå®šä¹‰ç‰ˆæœ¬å·ï¼Œä¸å†™çš„è¯é»˜è®¤ä¸ºå½“å‰æ—¶é—´æˆ³ï¼Œä¸€èˆ¬ä¸å†™</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapyd-deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ubuntu-1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dangdang_book</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>çˆ¬è™«ç›®å½•ä¸‹ä¸è¦æ”¾æ— å…³çš„<code>py</code>æ–‡ä»¶ï¼Œæ”¾æ— å…³çš„<code>py</code>æ–‡ä»¶ä¼šå¯¼è‡´å‘å¸ƒå¤±è´¥ï¼Œä½†æ˜¯å½“çˆ¬è™«å‘å¸ƒæˆåŠŸåï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ª<code>setup.py</code>æ–‡ä»¶ï¼Œå¯ä»¥åˆ é™¤æ‰ã€‚</p><figure><img src="/assets/scrapyd%E5%8F%91%E5%B8%83%E6%88%90%E5%8A%9F-CkaBrXRA.png" alt="scrapydå‘å¸ƒæˆåŠŸ" tabindex="0" loading="lazy"><figcaption>scrapydå‘å¸ƒæˆåŠŸ</figcaption></figure><p>å‘å¸ƒæˆåŠŸåå¯ä»¥åœ¨æœåŠ¡ç«¯æŸ¥çœ‹åˆ°ä¸Šä¼ çš„çˆ¬è™«é¡¹ç›®ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/scrapyd%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F%E5%90%8E%E7%9A%84%E6%95%88%E6%9E%9C-3vlZTCV-.png" alt="scrapydæœåŠ¡ç«¯ä¸Šä¼ æˆåŠŸåçš„æ•ˆæœ" tabindex="0" loading="lazy"><figcaption>scrapydæœåŠ¡ç«¯ä¸Šä¼ æˆåŠŸåçš„æ•ˆæœ</figcaption></figure><p>åˆ·æ–°ç‰©ç†æœºä¸Šçš„æµè§ˆå™¨åˆ™æ˜¾ç¤ºä¸Šä¼ æˆåŠŸåçš„<code>scrapy</code>é¡¹ç›®ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/%E7%89%A9%E7%90%86%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E5%88%B7%E6%96%B0%E5%90%8E%E6%98%BE%E7%A4%BA%E7%9A%84scrapy%E9%A1%B9%E7%9B%AE-uksctUFk.png" alt="ç‰©ç†æœºæµè§ˆå™¨åˆ·æ–°åæ˜¾ç¤ºçš„scrapyé¡¹ç›®" tabindex="0" loading="lazy"><figcaption>ç‰©ç†æœºæµè§ˆå™¨åˆ·æ–°åæ˜¾ç¤ºçš„scrapyé¡¹ç›®</figcaption></figure><h5 id="å¯åŠ¨é€šè¿‡scrapydéƒ¨ç½²çš„çˆ¬è™«" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨é€šè¿‡scrapydéƒ¨ç½²çš„çˆ¬è™«"><span>å¯åŠ¨é€šè¿‡<code>scrapyd</code>éƒ¨ç½²çš„çˆ¬è™«</span></a></h5><h6 id="è¿è¡ŒæŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#è¿è¡ŒæŒ‡ä»¤"><span>è¿è¡ŒæŒ‡ä»¤</span></a></h6><p><code>scrapyd</code>å·²ç»ç»™å‡ºäº†æ€æ ·å¼€å§‹è¿è¡Œçˆ¬è™«ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><img src="/assets/%E8%BF%9C%E7%A8%8B%E8%BF%90%E8%A1%8Cscrapy%E7%9A%84%E6%8C%87%E4%BB%A4-DgMJweXs.png" alt="è¿œç¨‹è¿è¡Œscrapyçš„æŒ‡ä»¤" tabindex="0" loading="lazy"><figcaption>è¿œç¨‹è¿è¡Œscrapyçš„æŒ‡ä»¤</figcaption></figure><p>å°†ä¸Šè¿°çš„å‘½ä»¤å¤åˆ¶ï¼Œä¹‹ååœ¨ç»ˆç«¯ä¸­è¿›è¡Œé€‚å½“çš„ä¿®æ”¹å³å¯å¼€å¯çˆ¬è™«ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">curl http:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">192.168</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.70.82:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6800</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">schedule.json </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d project</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">dangdang_book </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d spider</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">book</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="/assets/%E8%BF%9C%E7%A8%8B%E7%88%AC%E8%99%AB%E6%88%90%E5%8A%9F%E8%BF%90%E8%A1%8C-BUnf-41G.png" alt="è¿œç¨‹çˆ¬è™«æˆåŠŸè¿è¡Œ" tabindex="0" loading="lazy"><figcaption>è¿œç¨‹çˆ¬è™«æˆåŠŸè¿è¡Œ</figcaption></figure><p>çˆ¬è™«å¯åŠ¨æˆåŠŸåå¯åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹çˆ¬è™«è¿è¡ŒçŠ¶æ€ï¼Œåœ¨ä¸»é¡µä¸­ç‚¹å‡»<code>Jobs</code>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8B%E7%88%AC%E8%99%AB%E7%8A%B6%E6%80%81-uvd_AaK-.png" alt="æµè§ˆå™¨æŸ¥çœ‹çˆ¬è™«çŠ¶æ€" tabindex="0" loading="lazy"><figcaption>æµè§ˆå™¨æŸ¥çœ‹çˆ¬è™«çŠ¶æ€</figcaption></figure><p>éªŒè¯æœåŠ¡ç«¯æ˜¯å¦å¼€å§‹æŠ“å–ä¿¡æ¯ï¼š</p><figure><img src="/assets/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%BF%90%E8%A1%8C%E7%88%AC%E8%99%AB%E7%9A%84%E6%95%88%E6%9E%9C-Dzkp3y7Q.png" alt="æœåŠ¡ç«¯è¿è¡Œçˆ¬è™«çš„æ•ˆæœ" tabindex="0" loading="lazy"><figcaption>æœåŠ¡ç«¯è¿è¡Œçˆ¬è™«çš„æ•ˆæœ</figcaption></figure><p>éªŒè¯æœåŠ¡ç«¯ä¸­çš„<code>Redis</code>ä¿¡æ¯ï¼š</p><figure><img src="/assets/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%AD%E7%9A%84redis%E4%BF%A1%E6%81%AF-Dt8Bhslt.png" alt="æœåŠ¡ç«¯ä¸­çš„redisä¿¡æ¯" tabindex="0" loading="lazy"><figcaption>æœåŠ¡ç«¯ä¸­çš„redisä¿¡æ¯</figcaption></figure><h6 id="çˆ¬è™«åœæ­¢" tabindex="-1"><a class="header-anchor" href="#çˆ¬è™«åœæ­¢"><span>çˆ¬è™«åœæ­¢</span></a></h6><p>åœæ­¢çˆ¬è™«çš„æŒ‡ä»¤å¦‚ä¸‹ï¼š</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">curl http:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ip:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6800</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">cancel.json </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d project</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">é¡¹ç›®å </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d job</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ä»»åŠ¡çš„idå€¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä»»åŠ¡çš„<code>id</code>å€¼å¯åœ¨æµè§ˆå™¨ä¸­æŸ¥è¯¢ï¼š</p><figure><img src="/assets/%E8%BF%9C%E7%A8%8B%E7%88%AC%E8%99%AB%E7%9A%84id-B6sFuUDO.png" alt="è¿œç¨‹çˆ¬è™«çš„id" tabindex="0" loading="lazy"><figcaption>è¿œç¨‹çˆ¬è™«çš„id</figcaption></figure><p>æ ¹æ®é¡µé¢ä¸­æ˜¾ç¤ºçš„<code>id</code>ç¼–è¾‘æŒ‡ä»¤ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://192.168.70.82:6800/cancel.json</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> project=dangdang_book</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> job=55b4b87a98c111eeb1af001c42c139d2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="/assets/%E7%89%A9%E7%90%86%E6%9C%BA%E5%81%9C%E6%AD%A2%E7%88%AC%E8%99%AB%E7%9A%84%E6%8C%87%E4%BB%A4-BFP1p6Tp.png" alt="ç‰©ç†æœºåœæ­¢çˆ¬è™«çš„æŒ‡ä»¤" tabindex="0" loading="lazy"><figcaption>ç‰©ç†æœºåœæ­¢çˆ¬è™«çš„æŒ‡ä»¤</figcaption></figure><p>æµè§ˆå™¨æŸ¥è¯¢çˆ¬è™«è¿è¡ŒçŠ¶æ€ï¼š</p><figure><img src="/assets/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%BE%E7%A4%BA%E5%81%9C%E6%AD%A2%E7%9A%84%E7%88%AC%E8%99%AB%E7%8A%B6%E6%80%81-BsSOo12C.png" alt="æµè§ˆå™¨æ˜¾ç¤ºåœæ­¢çš„çˆ¬è™«çŠ¶æ€" tabindex="0" loading="lazy"><figcaption>æµè§ˆå™¨æ˜¾ç¤ºåœæ­¢çš„çˆ¬è™«çŠ¶æ€</figcaption></figure><h6 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h6><ol><li>å¦‚æœ<code>scrapy</code>é¡¹ç›®ä»£ç ï¼Œä¿®æ”¹äº†ï¼Œåªéœ€è¦é‡æ–°å‘å¸ƒåˆ°<code>scrapyd</code>æ‰€åœ¨æœåŠ¡å™¨å³å¯</li><li>å¦‚æœ<code>scrapy</code>é¡¹ç›®æš‚åœäº†ï¼Œå¯ä»¥å†æ¬¡é€šè¿‡<code>curl</code>çš„æ–¹å¼å‘é€å‘½ä»¤è®©å…¶&quot;æ–­ç‚¹ç»­çˆ¬&quot;</li></ol><h3 id="_4-é¡¹ç›®éƒ¨ç½²-scrapydweb" tabindex="-1"><a class="header-anchor" href="#_4-é¡¹ç›®éƒ¨ç½²-scrapydweb"><span>4.é¡¹ç›®éƒ¨ç½² - <code>scrapydweb</code></span></a></h3><h5 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹"><span>ç®€ä»‹</span></a></h5><p>æ˜¯ä¸€ä¸ªåŸºäº<code>scrapyd</code>çš„å¯è§†åŒ–ç»„ä»¶ï¼Œé›†æˆå¹¶ä¸”æä¾›æ›´å¤šå¯è§†åŒ–åŠŸèƒ½å’Œæ›´ä¼˜ç¾çš„ç•Œé¢ã€‚<code>scrapydweb</code>åç«¯æ˜¯é‡‡ç”¨<code>flask</code>æ¡†æ¶ç¼–å†™çš„ï¼Œæ‰€ä»¥å¯¹äºä¼š<code>flask</code>çš„åŒå­¦æ˜¯å¯ä»¥é€‚å½“å®šåˆ¶çš„ã€‚</p><h5 id="å®‰è£…ä¸è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#å®‰è£…ä¸è¿è¡Œ"><span>å®‰è£…ä¸è¿è¡Œ</span></a></h5><h6 id="å®‰è£…æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#å®‰è£…æ–¹å¼"><span>å®‰è£…æ–¹å¼</span></a></h6><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scrapydweb</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://pypi.tuna.tsinghua.edu.cn/simple</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="è¿è¡ŒæŒ‡ä»¤-1" tabindex="-1"><a class="header-anchor" href="#è¿è¡ŒæŒ‡ä»¤-1"><span>è¿è¡ŒæŒ‡ä»¤</span></a></h6><p>åœ¨è¿è¡Œ<code>scrapydweb</code>ä¹‹å‰ä¸€å®šè¦ç¡®ä¿<code>scrapyd</code>æ­£åœ¨è¿è¡Œï¼Œå¯ä»¥åœ¨<code>scrapyd</code>æœåŠ¡å¯åŠ¨ä¹‹åé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°ç»ˆç«¯çª—å£æ¥å¯åŠ¨<code>scrapydweb</code>ã€‚</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapyd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scrapydweb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>scrapydweb</code>é¡¹ç›®åœ°å€ï¼šhttps://github.com/my8100/scrapydweb?tab=readme-ov-file</p><p><code>scrapydweb</code>ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šæŠ¥é”™ï¼ŒæŠ¥é”™ä¹‹åé‡æ–°å¯åŠ¨å³å¯ï¼Œé‡æ–°å¯åŠ¨åä¼šåœ¨å¯åŠ¨è·¯å¾„çš„ä½ç½®ç”Ÿæˆè„šæœ¬æ–‡ä»¶ã€‚å¦‚æœé‡æ–°å¯åŠ¨å¤±è´¥å¹¶æŠ›å‡ºç‰ˆæœ¬ä¾èµ–é—®é¢˜è¯·æŸ¥çœ‹é¡¹ç›®åœ°å€ä¸­çš„<code>requirements.txt</code>æ–‡ä»¶å¹¶å®‰è£…æœ€æ–°ä¾èµ–ã€‚</p><p>å½“æˆåŠŸå¯åŠ¨åå¯ä½¿ç”¨ç‰©ç†æœºæµè§ˆå™¨è®¿é—®åœ°å€ï¼šhttp://192.168.70.82:5000/</p><p>æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><figure><img src="/assets/scrapydweb%E9%A6%96%E9%A1%B5-69eKB2Ly.png" alt="scrapydwebé¦–é¡µ" tabindex="0" loading="lazy"><figcaption>scrapydwebé¦–é¡µ</figcaption></figure><h5 id="åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ä½¿ç”¨"><span>åŸºæœ¬ä½¿ç”¨</span></a></h5><h6 id="å‘å¸ƒscrapyé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒscrapyé¡¹ç›®"><span>å‘å¸ƒ<code>scrapy</code>é¡¹ç›®</span></a></h6><figure><img src="/assets/scrapydweb%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE-0Jxh3RC3.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åœ¨è®¡ç®—æœºä¸­æœç´¢éœ€è¦éƒ¨ç½²çš„é¡¹ç›®ï¼Œé¡¹ç›®å¯ä»¥æ‰“åŒ…æˆå‹ç¼©åŒ…ï¼Œåœ¨æ‰“åŒ…å‹ç¼©åŒ…ä¹‹å‰éœ€è¦ç¡®è®¤é¡¹ç›®ä¸­åªæœ‰<code>scrapy</code>æ¡†æ¶ä»£ç ã€‚</p><figure><img src="/assets/%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%E4%B9%8B%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-Dyqxhk8H.png" alt="ä¸Šä¼ é¡¹ç›®ä¹‹å‰çš„å‡†å¤‡å·¥ä½œ" tabindex="0" loading="lazy"><figcaption>ä¸Šä¼ é¡¹ç›®ä¹‹å‰çš„å‡†å¤‡å·¥ä½œ</figcaption></figure><figure><img src="/assets/scrapydweb%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0-OHBWOyB6.png" alt="scrapydwebé¡¹ç›®ä¸Šä¼ " tabindex="0" loading="lazy"><figcaption>scrapydwebé¡¹ç›®ä¸Šä¼ </figcaption></figure><p>é¡¹ç›®ä¸Šä¼ æˆåŠŸåçš„æ•ˆæœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/scrapydweb%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F-XspSnD9L.png" alt="scrapydwebé¡¹ç›®ä¸Šä¼ æˆåŠŸ" tabindex="0" loading="lazy"><figcaption>scrapydwebé¡¹ç›®ä¸Šä¼ æˆåŠŸ</figcaption></figure><p>é¡¹ç›®è¿è¡Œï¼š</p><figure><img src="/assets/scrapydweb%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE-BdLE49Vj.png" alt="scrapydwebè¿è¡Œé¡¹ç›®" tabindex="0" loading="lazy"><figcaption>scrapydwebè¿è¡Œé¡¹ç›®</figcaption></figure><h3 id="_5-é¡¹ç›®éƒ¨ç½²-gerapy" tabindex="-1"><a class="header-anchor" href="#_5-é¡¹ç›®éƒ¨ç½²-gerapy"><span>5.é¡¹ç›®éƒ¨ç½² - <code>Gerapy</code></span></a></h3><p><code>Gerapy</code>æ˜¯ä¸€æ¬¾å›½äººå¼€å‘çš„çˆ¬è™«ç®¡ç†è½¯ä»¶ï¼ˆæœ‰ä¸­æ–‡ç•Œé¢ï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªç®¡ç†çˆ¬è™«é¡¹ç›®çš„å¯è§†åŒ–å·¥å…·ï¼ŒæŠŠé¡¹ç›®éƒ¨ç½²åˆ°ç®¡ç†çš„æ“ä½œå…¨éƒ¨å˜ä¸ºäº¤äº’å¼ï¼Œå®ç°æ‰¹é‡éƒ¨ç½²ï¼Œæ›´æ–¹ä¾¿æ§åˆ¶ã€ç®¡ç†ã€å®æ—¶æŸ¥çœ‹ç»“æœã€‚</p><p><code>gerapy</code>å’Œ<code>scrapyd</code>çš„å…³ç³»å°±æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>gerapy</code>ä¸­é…ç½®<code>scrapyd</code>åï¼Œä¸ä½¿ç”¨å‘½ä»¤ï¼Œç›´æ¥é€šè¿‡å›¾å½¢åŒ–ç•Œé¢å¼€å¯çˆ¬è™«ã€‚</p><h5 id="å®‰è£…æ–¹å¼-1" tabindex="-1"><a class="header-anchor" href="#å®‰è£…æ–¹å¼-1"><span>å®‰è£…æ–¹å¼</span></a></h5><blockquote><p>å®‰è£…ï¼š<code>gerapy</code>ä½œä¸ºå®¢æˆ·ç«¯æ‰€ä»¥éœ€è¦å®‰è£…åˆ°ç‰©ç†æœºä¸­</p></blockquote><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pip install gerapy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.12 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">i https:</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">pypi.tuna.tsinghua.edu.cn</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">simple</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®‰è£…æˆåŠŸåå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥æŒ‡ä»¤è¿›è¡Œæµ‹è¯•ï¼š</p><figure><img src="/assets/gerapy%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E6%B5%8B%E8%AF%95-BHbAgNpt.png" alt="gerapyçš„å®‰è£…ä¸æµ‹è¯•" tabindex="0" loading="lazy"><figcaption>gerapyçš„å®‰è£…ä¸æµ‹è¯•</figcaption></figure><h5 id="ä½¿ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹å¼"><span>ä½¿ç”¨æ–¹å¼</span></a></h5><p>æ–°å»ºæ–‡ä»¶å¤¹å¹¶å¯åŠ¨æŒ‡ä»¤ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gerapy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä»¥ä¸‹ä¸º<code>gerapy</code>é…ç½®æ“ä½œï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gerapy</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gerapy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> migrate</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # åŒæ­¥sqliteæ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gerapy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> createsuperuser</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # åˆ›å»ºè¶…çº§ç®¡ç†å‘˜</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gerapy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runserver</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # å¯åŠ¨æœåŠ¡ï¼Œè®¿é—®åœ°å€ä¸ºï¼š127.0.0.1:8000</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ç™»å½•ï¼š</p><figure><img src="/assets/gerapy%E7%99%BB%E5%BD%95%E9%A1%B5-Cbmlu3V6.png" alt="gerapyç™»å½•é¡µ" tabindex="0" loading="lazy"><figcaption>gerapyç™»å½•é¡µ</figcaption></figure><p>ç™»å½•æˆåŠŸåæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><figure><img src="/assets/gerapy%E9%A6%96%E9%A1%B5-BR4hlQld.png" alt="gerapyé¦–é¡µ" tabindex="0" loading="lazy"><figcaption>gerapyé¦–é¡µ</figcaption></figure><h5 id="é…ç½®å®Œæˆååˆ›å»ºä¸»æœº" tabindex="-1"><a class="header-anchor" href="#é…ç½®å®Œæˆååˆ›å»ºä¸»æœº"><span>é…ç½®å®Œæˆååˆ›å»ºä¸»æœº</span></a></h5><figure><img src="/assets/gerapy%E5%88%9B%E5%BB%BA%E4%B8%BB%E6%9C%BA-CsbVmARY.png" alt="gerapyåˆ›å»ºä¸»æœº" tabindex="0" loading="lazy"><figcaption>gerapyåˆ›å»ºä¸»æœº</figcaption></figure><p>ä¸»æœºè¿æ¥æˆåŠŸä¹‹åçš„æ•ˆæœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/gerapy%E4%B8%BB%E6%9C%BA%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F-BLg0SbMT.png" alt="gerapyä¸»æœºè¿æ¥æˆåŠŸ" tabindex="0" loading="lazy"><figcaption>gerapyä¸»æœºè¿æ¥æˆåŠŸ</figcaption></figure><h5 id="è¿è¡Œå·²ç»å­˜åœ¨çš„é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œå·²ç»å­˜åœ¨çš„é¡¹ç›®"><span>è¿è¡Œå·²ç»å­˜åœ¨çš„é¡¹ç›®</span></a></h5><p>åœ¨ä¸»æœºç®¡ç†é¡µé¢ä¸­ç‚¹å‡»è°ƒåº¦åˆ™å¯ä»¥æŸ¥çœ‹åˆ°å·²ç»å­˜åœ¨çš„é¡¹ç›®çŠ¶æ€ï¼š</p><figure><img src="/assets/gerapy%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E9%A1%B9%E7%9B%AE%E7%8A%B6%E6%80%81-CDFShOGL.png" alt="gerapyå·²ç»å­˜åœ¨çš„é¡¹ç›®çŠ¶æ€" tabindex="0" loading="lazy"><figcaption>gerapyå·²ç»å­˜åœ¨çš„é¡¹ç›®çŠ¶æ€</figcaption></figure><p>å½“å‰é¡µé¢ä¸­æœ‰è¿è¡ŒæŒ‰é’®ï¼Œå¦‚æœæƒ³è¦è¿è¡Œå½“å‰çˆ¬è™«åˆ™ç‚¹å‡»è¿è¡Œå³å¯ï¼Œå¦‚æœè¿è¡Œä¹‹åæƒ³è¦åœæ­¢åˆ™é¡µé¢ä¸­ä¼šæ˜¾ç¤ºåœæ­¢æŒ‰é’®ï¼Œç‚¹å‡»å³å¯ã€‚</p><h5 id="æœ¬åœ°é¡¹ç›®ä¸Šä¼ " tabindex="-1"><a class="header-anchor" href="#æœ¬åœ°é¡¹ç›®ä¸Šä¼ "><span>æœ¬åœ°é¡¹ç›®ä¸Šä¼ </span></a></h5><p>åœ¨é¡¹ç›®ç®¡ç†ä¸­ç‚¹å‡»ä¸Šä¼ å¹¶å°†é¡¹ç›®å‹ç¼©åŒ…ä¸Šä¼ å³å¯ï¼Œå‹ç¼©åŒ…ç±»å‹å¿…é¡»ä¸º<code>zip</code>ã€‚</p><figure><img src="/assets/gerapy%E7%88%AC%E8%99%AB%E9%83%A8%E7%BD%B2-xFWVh_jZ.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/python/2.çˆ¬è™«/1.çˆ¬è™«åŸºç¡€/10.Scrapyæ¡†æ¶ - åˆ†å¸ƒå¼çˆ¬è™«ä»¥åŠçˆ¬è™«éƒ¨ç½².md" aria-label="ç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CFFpmDzR.js" defer></script>
  </body>
</html>
